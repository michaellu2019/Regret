(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var o=a(0),i=a.n(o),s=a(9),n=a.n(s),r=(a(16),a(2)),l=a(3),c=a(1),h=a(4),d=a(5),u=a(7),g=a.n(u),m=a(10),p=a.n(m),f=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={auth:!1,user:{username:"",picture:"",userId:""}},o.componentClicked=o.componentClicked.bind(Object(c.a)(o)),o.responseFacebook=o.responseFacebook.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"componentClicked",value:function(){console.log("Button clicked...")}},{key:"responseFacebook",value:function(e){var t=this;"unknown"!=e.status&&this.setState({auth:!0,user:{username:e.name,picture:e.picture.data.url,userId:e.userID}},(function(){t.props.login(t.state.user)}))}},{key:"render",value:function(){var e;return this.state.auth||(e=i.a.createElement(p.a,{appId:"245982219776305",autoLoad:!1,fields:"name,picture",onClick:this.componentClicked,callback:this.responseFacebook})),i.a.createElement("div",null,e)}}]),a}(i.a.Component),v=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={hide:!0,currentColor:"white"},o.toggleShowSelector=o.toggleShowSelector.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){"strokeColor"==this.props.colorType?this.setState({currentColor:"black"}):"fillColor"==this.props.colorType&&this.setState({currentColor:"none"})}},{key:"toggleShowSelector",value:function(e){this.setState({hide:e})}},{key:"changeColor",value:function(e){this.toggleShowSelector(!0),this.setState({currentColor:e}),this.props.changeColor(e,this.props.colorType)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"color-select-container"},i.a.createElement("div",{style:"none"==this.state.currentColor?{background:"linear-gradient(white, black)"}:{backgroundColor:this.state.currentColor},className:"color-select-head",onClick:function(){return e.toggleShowSelector(!e.state.hide)}}),i.a.createElement("div",{className:this.state.hide?"color-select-options hide":"color-select-options"},"backgroundColor"!=this.props.colorType?i.a.createElement("div",{style:{background:"linear-gradient(white, black)"},className:"color-select-box",onClick:function(){return e.changeColor("none")}}):"",i.a.createElement("div",{style:{backgroundColor:"red"},className:"color-select-box",onClick:function(){return e.changeColor("red")}}),i.a.createElement("div",{style:{backgroundColor:"orange"},className:"color-select-box",onClick:function(){return e.changeColor("orange")}}),i.a.createElement("div",{style:{backgroundColor:"gold"},className:"color-select-box",onClick:function(){return e.changeColor("gold")}}),i.a.createElement("div",{style:{backgroundColor:"yellow"},className:"color-select-box",onClick:function(){return e.changeColor("yellow")}}),i.a.createElement("div",{style:{backgroundColor:"lime"},className:"color-select-box",onClick:function(){return e.changeColor("lime")}}),i.a.createElement("div",{style:{backgroundColor:"green"},className:"color-select-box",onClick:function(){return e.changeColor("green")}}),i.a.createElement("div",{style:{backgroundColor:"cyan"},className:"color-select-box",onClick:function(){return e.changeColor("cyan")}}),i.a.createElement("div",{style:{backgroundColor:"blue"},className:"color-select-box",onClick:function(){return e.changeColor("blue")}}),i.a.createElement("div",{style:{backgroundColor:"indigo"},className:"color-select-box",onClick:function(){return e.changeColor("indigo")}}),i.a.createElement("div",{style:{backgroundColor:"purple"},className:"color-select-box",onClick:function(){return e.changeColor("purple")}}),i.a.createElement("div",{style:{backgroundColor:"violet"},className:"color-select-box",onClick:function(){return e.changeColor("violet")}}),i.a.createElement("div",{style:{backgroundColor:"pink"},className:"color-select-box",onClick:function(){return e.changeColor("pink")}}),i.a.createElement("div",{style:{backgroundColor:"black"},className:"color-select-box",onClick:function(){return e.changeColor("black")}}),i.a.createElement("div",{style:{backgroundColor:"gray"},className:"color-select-box",onClick:function(){return e.changeColor("gray")}}),i.a.createElement("div",{style:{backgroundColor:"white"},className:"color-select-box",onClick:function(){return e.changeColor("white")}}),i.a.createElement("div",{style:{backgroundColor:"chocolate"},className:"color-select-box",onClick:function(){return e.changeColor("chocolate")}})))}}]),a}(i.a.Component),b=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={hide:!0,currentWeight:1},o.toggleShowSelector=o.toggleShowSelector.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"toggleShowSelector",value:function(e){this.setState({hide:e})}},{key:"changeStrokeWeight",value:function(e){this.toggleShowSelector(!0),this.setState({currentWeight:e}),this.props.changeStrokeWeight(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"size-select-container"},i.a.createElement("div",{className:"size-select-head",onClick:function(){return e.toggleShowSelector(!e.state.hide)}},this.state.currentWeight),i.a.createElement("div",{className:this.state.hide?"size-select-options hide":"size-select-options"},i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(1)}},"1"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(3)}},"3"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(5)}},"5"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(7)}},"7"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(9)}},"9"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(11)}},"11"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(13)}},"13"),i.a.createElement("div",{className:"size-select-box",onClick:function(){return e.changeStrokeWeight(15)}},"15")))}}]),a}(i.a.Component),k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={imgSrc:""},o.loadImgUrl=o.loadImgUrl.bind(Object(c.a)(o)),o.loadImgFile=o.loadImgFile.bind(Object(c.a)(o)),o.useImg=o.useImg.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"loadImgFile",value:function(e){var t=new Image;t.src=URL.createObjectURL(e.target.files[0]);var a=this;t.onload=function(){a.setState({imgSrc:this.src,imgW:this.naturalWidth,imgH:this.naturalHeight})}}},{key:"loadImgUrl",value:function(){var e=new Image;e.src=this.urlInput.value;var t=this;e.onload=function(){t.setState({imgSrc:this.src,imgW:this.naturalWidth,imgH:this.naturalHeight})}}},{key:"useImg",value:function(){this.props.useImg(this.state.imgSrc,this.state.imgW,this.state.imgH)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.show?"image-selector":"image-selector hide"},i.a.createElement("div",{className:"image-inputs"},i.a.createElement("input",{type:"file",accept:"image/*",id:"input-image-file",onChange:this.loadImgFile}),i.a.createElement("label",{id:"input-image-file-label",className:"ghost-button",htmlFor:"input-image-file"},i.a.createElement("svg",null,i.a.createElement("g",null,i.a.createElement("path",{className:"st0",d:"M9.825 15.275h4.375V10.9h2.925L12 5.8 6.9 10.9h2.925V15.275zM6.9 16.75h10.2v1.45H6.9V16.75z"}))),"Upload Image"),i.a.createElement("input",{ref:function(t){e.urlInput=t},type:"text",id:"input-image-url",placeholder:" Enter URL",onChange:this.loadImgUrl})," ",i.a.createElement("br",null)),"Image Preview: ",i.a.createElement("br",null),i.a.createElement("div",{className:""!=this.state.imgSrc?"image-selector-preview":"image-selector-preview hide"},i.a.createElement("div",{className:"ghost-button",id:"choose-image",onClick:this.useImg},"Use Image")," ",i.a.createElement("br",null),i.a.createElement("img",{ref:function(t){e.img=t},src:this.state.imgSrc})))}}]),a}(i.a.Component),w=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).isPainting=!1,o.backgroundColor="#ffffff",o.strokeColor="#000000",o.fillColor="none",o.strokeWeight=1,o.prevMousePos={x:0,y:0},o.prevDragMousePos={x:0,y:0},o.imgToPlace={src:"",aspectRatio:1},o.strokes=[],o.lines=[],o.rects=[],o.ellipses=[],o.images=[],o.elements=[],o.undos=[],o.mode="stroke",o.state={backgroundColor:"#ffffff",elements:[],mode:"stroke",showImageSelect:!1},o.toggleMode=o.toggleMode.bind(Object(c.a)(o)),o.initCanvas=o.initCanvas.bind(Object(c.a)(o)),o.getMousePos=o.getMousePos.bind(Object(c.a)(o)),o.onMouseDown=o.onMouseDown.bind(Object(c.a)(o)),o.onMouseMove=o.onMouseMove.bind(Object(c.a)(o)),o.endPaintEvent=o.endPaintEvent.bind(Object(c.a)(o)),o.useImg=o.useImg.bind(Object(c.a)(o)),o.showStroke=o.showStroke.bind(Object(c.a)(o)),o.showErase=o.showErase.bind(Object(c.a)(o)),o.showRect=o.showRect.bind(Object(c.a)(o)),o.showImg=o.showImg.bind(Object(c.a)(o)),o.renderCanvas=o.renderCanvas.bind(Object(c.a)(o)),o.changeColor=o.changeColor.bind(Object(c.a)(o)),o.changeStrokeWeight=o.changeStrokeWeight.bind(Object(c.a)(o)),o.undo=o.undo.bind(Object(c.a)(o)),o.redo=o.redo.bind(Object(c.a)(o)),o.clearCanvas=o.clearCanvas.bind(Object(c.a)(o)),o.save=o.save.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.initCanvas(),window.addEventListener("resize",this.initCanvas)}},{key:"toggleMode",value:function(e){this.setState({mode:e,showImageSelect:!1}),this.mode=e,"img"==e&&(this.imgToPlace={src:"",aspectRatio:1},this.setState({showImageSelect:!0}))}},{key:"initCanvas",value:function(){this.canvas.width=this.doodleCanvasContainer.clientWidth,this.canvas.height=this.doodleCanvasContainer.clientHeight,this.ctx=this.canvas.getContext("2d"),this.renderCanvas()}},{key:"getMousePos",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}}},{key:"onMouseDown",value:function(e){var t=e.nativeEvent;this.isPainting=!0,this.prevMousePos=this.getMousePos(t),"line"!=this.mode&&"rect"!=this.mode&&"ellipse"!=this.mode&&"img"!=this.mode||(this.prevDragMousePos=this.prevMousePos)}},{key:"onMouseMove",value:function(e){var t=e.nativeEvent;if(this.isPainting){var a=this.getMousePos(t);if("stroke"==this.mode)this.showStroke(this.prevMousePos,a,this.strokeColor,this.strokeWeight,!0);else if("eraser"==this.mode)this.showErase(this.prevMousePos,a,this.strokeWeight,!0);else if("line"==this.mode)this.renderCanvas(),this.showLine(this.prevDragMousePos,a,this.strokeColor,this.strokeWeight,!1);else if("rect"==this.mode)this.renderCanvas(),this.showRect(this.prevDragMousePos,a,this.strokeColor,this.strokeWeight,this.fillColor,!1);else if("ellipse"==this.mode)this.renderCanvas(),this.showEllipse(this.prevDragMousePos,a,this.strokeColor,this.strokeWeight,this.fillColor,!1);else if("img"==this.mode){this.renderCanvas();var o=new Image;o.src=this.imgToPlace.src,o.ctx=this.ctx;var i=this;o.onload=function(){i.showImg(o,i.prevDragMousePos,a,!1)}}this.prevMousePos=a}}},{key:"endPaintEvent",value:function(e){e.nativeEvent;if(this.isPainting){this.isPainting=!1;var t={x:this.prevMousePos.x+.5,y:this.prevMousePos.y+.5};if("stroke"==this.mode)this.showStroke(this.prevMousePos,t,this.strokeColor,this.strokeWeight,!0);else if("eraser"==this.mode)this.showErase(this.prevMousePos,t,this.strokeWeight,!0);else if("line"==this.mode)this.renderCanvas(),this.showLine(this.prevDragMousePos,this.prevMousePos,this.strokeColor,this.strokeWeight,!0);else if("rect"==this.mode)this.renderCanvas(),this.showRect(this.prevDragMousePos,this.prevMousePos,this.strokeColor,this.strokeWeight,this.fillColor,!0);else if("ellipse"==this.mode)this.renderCanvas(),this.showEllipse(this.prevDragMousePos,this.prevMousePos,this.strokeColor,this.strokeWeight,this.fillColor,!0);else if("img"==this.mode){this.renderCanvas(),this.renderCanvas();var a=new Image;a.src=this.imgToPlace.src,a.ctx=this.ctx;var o=this;a.onload=function(){o.showImg(a,o.prevDragMousePos,o.prevMousePos,!0)}}}}},{key:"showStroke",value:function(e,t,a,o,i){var s={type:"stroke",strokeColor:a,strokeWeight:o,pos:e,nextPos:t};"none"!=s.strokeColor&&(this.ctx.strokeStyle=s.strokeColor,this.ctx.lineWidth=s.strokeWeight,this.ctx.beginPath(),this.ctx.lineJoin="round",this.ctx.moveTo(s.pos.x,s.pos.y),this.ctx.lineTo(s.nextPos.x,s.nextPos.y),this.ctx.closePath(),this.ctx.stroke()),i&&(this.strokes.push(s),this.elements.push(s))}},{key:"showErase",value:function(e,t,a,o){var i={type:"eraser",strokeColor:this.backgroundColor,strokeWeight:a,pos:e,nextPos:t};"none"!=i.strokeColor&&(this.ctx.strokeStyle=i.strokeColor,this.ctx.lineWidth=i.strokeWeight,this.ctx.beginPath(),this.ctx.lineJoin="round",this.ctx.moveTo(i.pos.x,i.pos.y),this.ctx.lineTo(i.nextPos.x,i.nextPos.y),this.ctx.closePath(),this.ctx.stroke()),o&&(this.strokes.push(i),this.elements.push(i))}},{key:"showLine",value:function(e,t,a,o,i){var s={type:"line",strokeColor:a,strokeWeight:o,pos:e,nextPos:t};"none"!=s.strokeColor&&(this.ctx.strokeStyle=s.strokeColor,this.ctx.lineWidth=s.strokeWeight,this.ctx.beginPath(),this.ctx.moveTo(s.pos.x,s.pos.y),this.ctx.lineTo(s.nextPos.x,s.nextPos.y),this.ctx.closePath(),this.ctx.stroke()),i&&(this.lines.push(s),this.elements.push(s))}},{key:"showRect",value:function(e,t,a,o,i,s){var n={type:"rect",strokeColor:a,strokeWeight:o,fillColor:i,pos:e,nextPos:t,size:{w:t.x-e.x,h:t.y-e.y}};"none"!=n.strokeColor&&(this.ctx.strokeStyle=n.strokeColor,this.ctx.lineWidth=n.strokeWeight,this.ctx.beginPath(),this.ctx.lineJoin="miter",this.ctx.rect(n.pos.x,n.pos.y,n.size.w,n.size.h),this.ctx.closePath(),this.ctx.stroke()),"none"!=n.fillColor&&(this.ctx.fillStyle=n.fillColor,this.ctx.fillRect(n.pos.x,n.pos.y,n.size.w,n.size.h)),s&&(this.rects.push(n),this.elements.push(n))}},{key:"showEllipse",value:function(e,t,a,o,i,s){var n={type:"ellipse",strokeColor:a,strokeWeight:o,fillColor:i,pos:e,nextPos:t,size:{w:t.x-e.x,h:t.y-e.y}};"none"!=n.strokeColor&&(this.ctx.strokeStyle=n.strokeColor,this.ctx.lineWidth=n.strokeWeight,this.ctx.beginPath(),this.ctx.ellipse((n.pos.x+n.nextPos.x)/2,(n.pos.y+n.nextPos.y)/2,Math.abs(n.size.w/2),Math.abs(n.size.h/2),0,0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke()),"none"!=n.fillColor&&(this.ctx.fillStyle=n.fillColor,this.ctx.beginPath(),this.ctx.ellipse((n.pos.x+n.nextPos.x)/2,(n.pos.y+n.nextPos.y)/2,Math.abs(n.size.w/2),Math.abs(n.size.h/2),0,0,2*Math.PI),this.ctx.fill()),s&&(this.ellipses.push(n),this.elements.push(n))}},{key:"showImg",value:function(e,t,a,o){var i={type:"img",src:this.imgToPlace.src,obj:e,pos:t,nextPos:a,size:{w:(a.y-t.y)*(e.width/e.height),h:a.y-t.y}};this.ctx.drawImage(i.obj,i.pos.x,i.pos.y,i.size.w,i.size.h),o&&(this.images.push(i),this.elements.push(i))}},{key:"useImg",value:function(e,t,a){this.imgToPlace.src=e,this.imgToPlace.aspectRatio=t/a,this.setState({showImageSelect:!1})}},{key:"renderCanvas",value:function(){this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(var e=0;e<this.elements.length;e++){var t=this.elements[e];void 0!=t&&null!=t&&("stroke"==t.type?this.showStroke(t.pos,t.nextPos,t.strokeColor,t.strokeWeight,!1):"eraser"==t.type?this.showErase(t.pos,t.nextPos,t.strokeWeight,!1):"line"==t.type?this.showLine(t.pos,t.nextPos,t.strokeColor,t.strokeWeight,!1):"rect"==t.type?this.showRect(t.pos,t.nextPos,t.strokeColor,t.strokeWeight,t.fillColor,!1):"ellipse"==t.type?this.showEllipse(t.pos,t.nextPos,t.strokeColor,t.strokeWeight,t.fillColor,!1):"img"==t.type&&this.showImg(t.obj,t.pos,t.nextPos,!1))}}},{key:"changeColor",value:function(e,t){"backgroundColor"==t?(this.backgroundColor=e,this.setState({backgroundColor:e})):"strokeColor"==t?this.strokeColor=e:"fillColor"==t&&(this.fillColor=e),this.renderCanvas()}},{key:"changeStrokeWeight",value:function(e){this.strokeWeight=e}},{key:"undo",value:function(){var e=this.elements.pop();if(this.undos.push(e),this.renderCanvas(),void 0!=e&&null!=e&&"stroke"==e.type)for(var t=0;void 0!=e&&null!=e&&"stroke"==e.type&&t<5;){var a=this.elements.pop();this.undos.push(a),this.renderCanvas(),t+=1}}},{key:"redo",value:function(){if(this.undos.length>0){var e=this.undos.pop();if(this.elements.push(e),this.renderCanvas(),void 0!=e&&null!=e&&"stroke"==e.type)for(var t=0;void 0!=e&&null!=e&&"stroke"==e.type&&t<5;){var a=this.undos.pop();this.elements.push(a),this.renderCanvas(),t+=1}}}},{key:"clearCanvas",value:function(){this.strokes=[],this.lines=[],this.rects=[],this.ellipses=[],this.elements=[],this.renderCanvas()}},{key:"save",value:function(){var e=this.canvas.toDataURL();this.props.addImgToWall(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{ref:function(t){e.doodleCanvasContainer=t},style:{backgroundColor:this.state.backgroundColor},className:"doodle-canvas-container"},i.a.createElement("span",{className:"subheading"},"Create a Doodle"),i.a.createElement("span",{className:"close-window-button",onClick:function(){return e.props.toggleMode("view")}},"+"),i.a.createElement("nav",{className:"tool-panel"},i.a.createElement("div",{className:"tool-panel-button",style:{marginRight:"1em"},title:"Clear All",onClick:this.clearCanvas},"Clear"),i.a.createElement("div",{className:"stroke"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Draw",onClick:function(){return e.toggleMode("stroke")}},i.a.createElement("svg",{className:"icon",width:"1.5em",height:"1.5em"},i.a.createElement("path",{d:"m8.602 21.351-5.535-5.535 13.388-13.387 5.535 5.535zm-6.052-4.56 5.077 5.077-7.612 2.535zm21.142-10.523-.96.96-5.542-5.542.96-.96c.967-.968 2.535-.968 3.502 0l2.04 2.04c.96.97 .96 2.532 0 3.502zm0 0"}))),i.a.createElement("div",{className:"eraser"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Erase",onClick:function(){return e.toggleMode("eraser")}},i.a.createElement("svg",{className:"icon",width:"1.5em",height:"1.5em"},i.a.createElement("path",{d:"M24.911 8.07 17.517.675c-.23-.23-.604-.23-.834 0L4.167 13.191c-.111.111-.173.261-.173.417 0 .127.042 .248.117 .349l-3.808 3.808C.108 17.96 0 18.22 0 18.496c0 .276.108 .536.303 .732l4.34 4.34c.654.654 1.523 1.014 2.448 1.014.925 0 1.794-.36 2.448-1.014l2.092-2.092c.101.074 .222.117 .349.117 .156 0 .307-.062.417-.173L24.911 8.904c.111-.111.173-.261.173-.417S25.022 8.18 24.911 8.07zM8.703 22.734c-.431.431-1.004.668-1.613.668-.609 0-1.182-.237-1.613-.668L1.24 18.496l3.698-3.698 5.85 5.85L8.703 22.734z"}))),i.a.createElement("div",{className:"line"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Line",onClick:function(){return e.toggleMode("line")}},i.a.createElement("svg",{className:"shape",width:"1.5em",height:"1.5em"},i.a.createElement("line",{x1:"0",y1:"0",x2:"100",y2:"100"}))),i.a.createElement("div",{className:"rect"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Rectangle",onClick:function(){return e.toggleMode("rect")}},i.a.createElement("svg",{className:"shape",width:"1.5em",height:"1.5em"},i.a.createElement("rect",{width:"1.5em",height:"1.5em",style:{strokeWidth:6}}))),i.a.createElement("div",{className:"ellipse"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Ellipse",onClick:function(){return e.toggleMode("ellipse")}},i.a.createElement("svg",{className:"shape",width:"1.5em",height:"1.5em"},i.a.createElement("circle",{cx:"0.75em",cy:"0.75em",r:"0.6em"}))),i.a.createElement("div",{className:"img"==this.state.mode?"tool-panel-button active":"tool-panel-button",title:"Image",onClick:function(){return e.toggleMode("img")}},i.a.createElement("svg",{className:"icon",width:"1.5em",height:"1.5em"},i.a.createElement("path",{d:"M8.32 7.488q0 1.04-.728 1.768t-1.768.728-1.768-.728-.728-1.768.728-1.768 1.768-.728 1.768.728 .728 1.768zm13.312 4.992v5.824h-18.304v-2.496l4.16-4.16 2.08 2.08 6.656-6.656zm1.248-9.152h-20.8q-.169 0-.293.123t-.123.293v15.808q0 .169.123 .293t.293.123h20.8q.169 0 .293-.123t.123-.293v-15.808q0-.169-.123-.292t-.293-.123zm2.08.416v15.808q0 .858-.611 1.469t-1.469.611h-20.8q-.858 0-1.469-.611t-.611-1.469v-15.808q0-.858.611-1.469t1.469-.611h20.8q.858 0 1.469.611t.611 1.469z"}))),i.a.createElement("div",{className:"tool-panel-button",title:"Undo",onClick:this.undo},i.a.createElement("svg",{className:"icon",width:"1.5em",height:"1.5em"},i.a.createElement("path",{d:"M22.395 18.41c0-.84.18-4.155-2.435-6.785-1.76-1.77-4.015-2.67-7.165-2.81V4.8L3.2 11.2l9.6 6.4v-3.99c2 .055 3.12.455 4.335 1 1.545.69 2.765 2.2 3.79 3.83l.96 1.56H22.4C22.4 19.495 22.395 18.855 22.395 18.41z"}))),i.a.createElement("div",{className:"tool-panel-button",title:"Redo",onClick:this.redo},i.a.createElement("svg",{className:"icon",width:"1.5em",height:"1.5em",style:{transform:"scale(-1, 1)"}},i.a.createElement("path",{d:"M22.395 18.41c0-.84.18-4.155-2.435-6.785-1.76-1.77-4.015-2.67-7.165-2.81V4.8L3.2 11.2l9.6 6.4v-3.99c2 .055 3.12.455 4.335 1 1.545.69 2.765 2.2 3.79 3.83l.96 1.56H22.4C22.4 19.495 22.395 18.855 22.395 18.41z"}))),i.a.createElement("div",{className:"tool-panel-button",style:{marginLeft:"1em"},title:"Done",onClick:this.save},"Done"),i.a.createElement(k,{show:this.state.showImageSelect,useImg:this.useImg})),i.a.createElement("div",{className:"settings-panel"},"Background:",i.a.createElement(v,{changeColor:this.changeColor,colorType:"backgroundColor"}),"Stroke:",i.a.createElement(v,{changeColor:this.changeColor,colorType:"strokeColor"}),"Fill:",i.a.createElement(v,{changeColor:this.changeColor,colorType:"fillColor"}),"Stroke Size: ",i.a.createElement(b,{changeStrokeWeight:this.changeStrokeWeight})),i.a.createElement("canvas",{className:"doodle-canvas",ref:function(t){e.canvas=t},onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onTouchEnd:this.endPaintEvent,onTouchCancel:this.endPaintEvent,onMouseMove:this.onMouseMove,onTouchMove:this.onMouseMove},"Your browser doesn't support canvas..."))}}]),a}(i.a.Component),y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={},o.useImg=o.useImg.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"useImg",value:function(e,t,a){this.props.addImgToWall(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"editing-image-container"},i.a.createElement("span",{className:"subheading"},"Add an Image"),i.a.createElement("span",{className:"close-window-button",onClick:function(){return e.props.toggleMode("view")}},"+"),i.a.createElement("br",null),i.a.createElement(k,{show:!0,useImg:this.useImg}))}}]),a}(i.a.Component),C=a(6),x=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={},o}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.wallId==this.props.currentWall?"wall-piece":"wall-piece hide",style:{left:this.props.x+"px",top:this.props.y+"px"},onClick:function(){return e.props.getPieceInfo(e.props.index)}},"clear"!=this.props.imgSrc&&0!=this.props.artistPkId?i.a.createElement("img",{id:"wall-piece-img-"+this.props.index,className:"wall-piece-img",src:this.props.imgSrc,width:this.props.width,draggable:"false"}):i.a.createElement("div",{id:"wall-piece-clearzone-"+this.props.index,className:"wall-piece-clearzone",style:{width:this.props.width,height:this.props.height},draggable:"false"}))}}]),a}(i.a.Component),E=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).pieces=[],o.hitboards=[],o.state={pieces:[],canPlace:!0,imgToAddTitle:"Untitled Piece",imgToAddDescription:"A beautiful work of art.",imgToAddWidth:"200px",imgDragging:!1,hitbox:{src:"",x:0,y:0,w:0,h:0},hitboards:[],pieceToShow:null,buffering:!1,bufferingCounter:15,loadingMessageIndex:0,loadingMessages:["Unfortunately... This may take a while...",'Don\'t you hate it when you tell him something sentimental, and he texts back "Cool Beans \ud83e\udd54\ud83e\udd54\ud83e\udd54"? (jhn)',"I could get cuffed by the time this loads. Hell, I could even get married!","TFW you make the same mistake twice...","I'm going to grow a full beard by the time this loads!","According to all known laws of aviation, there is no way a bee should be able to fly. Its wings are too small to get its fat little body off the ground. The bee, of course, flies anyway because bees don't care what humans think is impossible. Yellow, black. Yellow, black. Yellow, black. Yellow, black. Ooh, black and yellow! Let's shake it up a little. Barry! Breakfast is ready! Ooming! Hang on a second. Hello? - Barry? - Adam? - Oan you believe this is happening? - I can't. I'll pick you up. Looking sharp. Use the stairs. Your father paid good money for those. Sorry. I'm excited. Here's the graduate. We're very proud of you, son. A perfect report card, all B's. Very proud. Ma! I got a thing going here. - You got lint on your fuzz. - Ow! That's me! - Wave to us! We'll be in row 118,000. - Bye! Barry, I told you, stop flying in the house! - Hey, Adam. - Hey, Barry. - Is that fuzz gel? - A little. Special day, graduation. Never thought I'd make it. Three days grade school, three days high school. Those were awkward. Three days college. I'm glad I took a day and hitchhiked around the hive. You did come back different. - Hi, Barry. - Artie, growing a mustache? Looks good. - Hear about Frankie? - Yeah. - You going to the funeral? - No, I'm not going. Everybody knows, sting someone, you die. Don't waste it on a squirrel. Such a hothead. I guess he could have just gotten out of the way. I love this incorporating an amusement park into our day. That's why we don't need vacations. Boy, quite a bit of pomp... under the circumstances. - Well, Adam, today we are men. - We are! - Bee-men."],currentWall:0,imgToAddSrc:"",mobileUser:!1,errorWindowMsg:""},o.loadPieces=o.loadPieces.bind(Object(c.a)(o)),o.createHitboard=o.createHitboard.bind(Object(c.a)(o)),o.addPieceToHitboard=o.addPieceToHitboard.bind(Object(c.a)(o)),o.checkPieceClear=o.checkPieceClear.bind(Object(c.a)(o)),o.setHitboxOffset=o.setHitboxOffset.bind(Object(c.a)(o)),o.handleImgPick=o.handleImgPick.bind(Object(c.a)(o)),o.handleImgDrag=o.handleImgDrag.bind(Object(c.a)(o)),o.handleImgDrop=o.handleImgDrop.bind(Object(c.a)(o)),o.getOpenSpot=o.getOpenSpot.bind(Object(c.a)(o)),o.autoPlace=o.autoPlace.bind(Object(c.a)(o)),o.renderPieces=o.renderPieces.bind(Object(c.a)(o)),o.adjustImgProps=o.adjustImgProps.bind(Object(c.a)(o)),o.getPieceInfo=o.getPieceInfo.bind(Object(c.a)(o)),o.hidePieceInfo=o.hidePieceInfo.bind(Object(c.a)(o)),o.likePiece=o.likePiece.bind(Object(c.a)(o)),o.hidePopUpWindow=o.hidePieceInfo.bind(Object(c.a)(o)),o.bufferingTick=o.bufferingTick.bind(Object(c.a)(o)),o.startBufferingCountdown=o.startBufferingCountdown.bind(Object(c.a)(o)),o.intervalHandle=null,o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({buffering:!0,loadingMessageIndex:Math.floor(3*Math.random())}),this.loadPieces(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.setState({mobileUser:!0}),this.startBufferingCountdown()}},{key:"bufferingTick",value:function(){0!=this.state.bufferingCounter?(this.state.bufferingCounter%5==0&&this.setState({loadingMessageIndex:Math.floor(Math.random()*this.state.loadingMessages.length)}),this.setState({bufferingCounter:this.state.bufferingCounter-1})):clearInterval(this.intervalHandle)}},{key:"startBufferingCountdown",value:function(){this.intervalHandle=setInterval(this.bufferingTick,1300)}},{key:"loadPieces",value:function(){var e=this;console.log("Loading wall...");fetch("/load_wall",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if("success"==t.status){console.log("Loading successful...",t),e.pieces=t.data.pieces,console.log("Creating Hitboards"),e.createHitboard();for(var a=0;a<e.pieces.length;a++)e.addPieceToHitboard(e.pieces[a]);console.log("Done Creating Hitboards"),clearInterval(e.intervalHandle),e.setState({pieces:t.data.pieces,buffering:!1,hitboards:e.hitboards,bufferingCounter:0}),e.props.changeBufferingStatus(!1)}else console.log("Loading failed...",t),e.setState({buffering:!1})})).catch((function(t){console.log("Loading error...",t),e.setState({buffering:!1})}))}},{key:"createHitboard",value:function(){for(var e=0;e<4;e++){for(var t=[],a=0;a<this.wall.clientHeight;a++){for(var o=[],i=0;i<this.wall.clientWidth;i++)o.push(0);t.push(o)}this.hitboards.push(t)}}},{key:"addPieceToHitboard",value:function(e){for(var t=Math.floor(e.y);t<e.y+e.h;t++)for(var a=Math.floor(e.x);a<e.x+e.w;a++)this.hitboards[e.wallId][t][a]=1}},{key:"checkPieceClear",value:function(e){for(var t=!0,a=0;a<this.state.pieces.length;a++){var o=this.state.pieces[a];o.wallId==this.props.currentWall&&e.x+20<o.x+o.w&&e.x+e.w-20>o.x&&e.y+20<o.y+o.h&&e.y+e.h-20>o.y&&(t=!1)}return e.x>=0&&e.x+e.w<this.wall.clientWidth&&e.y>=0&&e.y+e.h<this.wall.clientHeight||(t=!1),t}},{key:"setHitboxOffset",value:function(e){this.setState({hitboxOffset:{x:e.pageX-document.getElementById("image-to-add").getBoundingClientRect().x-window.scrollX,y:e.pageY-document.getElementById("image-to-add").getBoundingClientRect().y-window.scrollY}})}},{key:"handleImgPick",value:function(e){this.props.imgToAddPlaced||this.state.mobileUser||this.setState({imgToAddSrc:this.imgToAdd.src})}},{key:"handleImgDrag",value:function(e,t,a,o){if(!this.props.imgToAddPlaced&&!this.state.mobileUser){var i={src:this.imgToAdd.src,x:a-this.state.hitboxOffset.x+window.scrollX,y:o-this.state.hitboxOffset.y+window.scrollY,w:this.imgToAdd.clientWidth,h:this.imgToAdd.clientHeight},s=this.checkPieceClear(i);this.setState({canPlace:s,hitbox:i,imgDragging:!0})}}},{key:"handleImgDrop",value:function(e,t,a,o){var i={pkId:-1,index:this.state.pieces.length,title:this.state.imgToAddTitle,artist:this.props.user.username,description:this.state.imgToAddDescription,artistPkId:this.props.user.pkId,likesPkIds:[],numLikes:0,src:this.state.imgToAddSrc,x:Math.floor(this.state.hitbox.x),y:Math.floor(this.state.hitbox.y),w:Math.floor(this.state.hitbox.w),h:Math.floor(this.state.hitbox.h),wallId:this.props.currentWall};if(console.log("Dropping ",i),this.checkPieceClear(i)){console.log("Piece clear...");var s=new Image;s.crossOrigin="Anonymous",s.src=this.state.imgToAddSrc;var n=this;n.setState({canPlace:!0,imgDragging:!1,buffering:!0,loadingMessageIndex:Math.floor(Math.random()*this.state.loadingMessages.length),hitbox:{src:"",x:0,y:0,w:0,h:0},hitboxOffset:{x:0,y:0}}),s.onload=function(){console.log("Image loaded...");var e=1;s.naturalWidth>720&&(e=s.naturalWidth/720,console.log("Image rescaled from "+s.naturalWidth+" x "+s.naturalHeight+" to "+s.naturalWidth/e+" x "+s.naturalHeight/e+"...")),n.hiddenCanvas.width=s.naturalWidth/e,n.hiddenCanvas.height=s.naturalHeight/e,n.hiddenCanvas.getContext("2d").drawImage(s,0,0,s.naturalWidth/e,s.naturalHeight/e);var t="data:image/png;base64,"+n.hiddenCanvas.toDataURL("image/png").replace(/^data:image.+;base64,/,"");i.src=t,console.log("Adding piece to wall...");var a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({piece:i})};fetch("/add_piece",a).then((function(e){return e.json()})).then((function(e){if("success"==e.status){console.log("Addition successful...",e),n.pieces.push(e.data.piece),n.props.pieceAddedToWall(),n.setState({pieces:n.pieces,buffering:!1});var t={username:e.data.user.username,fbId:e.data.user.fbId,pkId:e.data.user.pkId,profilePicture:e.data.user.profilePicture,numPieces:e.data.user.numPieces,maxNumPieces:e.data.user.maxNumPieces};n.props.updateUser(t)}else console.log("Addition failed...",e)})).catch((function(e){console.log("Addition error...",e)}))}}else console.log("Piece not clear..."),this.setState({canPlace:!0,imgDragging:!1,buffering:!1,hitbox:{src:"",x:0,y:0,w:0,h:0},hitboxOffset:{x:0,y:0}})}},{key:"getOpenSpot",value:function(e){for(var t=this.hitboards[this.props.currentWall],a=0;a<t.length-e.h;a+=5)for(var o=0;o<t[a].length-e.w;o+=5)if(0==t[a][o]&&0==t[a][o+e.w-1]&&0==t[a+e.h-1][o]&&0==t[a+e.h-1][o+e.w-1]){for(var i=!0,s=!0,n=1;n<e.w-1;n+=10)if(1==t[a][o+n]||1==t[a+e.h-1][o+n]){i=!1;break}if(i)for(var r=1;r<e.h-1;r+=10)if(1==t[a+r][o]||1==t[a+r][o+e.w-1]){i=!1;break}if(i)for(n=o+1;n<o+e.w-2;n+=35)for(r=a+1;r<a+e.h-2;r+=35)if(1==t[r][n]){s=!1;break}if(i&&s)return{x:o,y:a}}return{x:-1,y:-1}}},{key:"autoPlace",value:function(){var e=this,t={w:document.getElementById("image-to-add").width,h:document.getElementById("image-to-add").height};console.log(t),this.setState({imgToAddSrc:document.getElementById("image-to-add").src},(function(){var a=e.getOpenSpot(t);a.x>-1&&a.y>-1?(t.x=a.x,t.y=a.y,e.setState({hitbox:t},(function(){console.log("sending to ",a.x,a.y),e.handleImgDrop({},{},a.x,a.y)}))):e.setState({errorWindowMsg:"There's no space on this wall for your image. Try decreasing the size or cycling to another wall!"})}))}},{key:"adjustImgProps",value:function(e){"title"==e?this.setState({imgToAddTitle:this.imgTitle.value}):"description"==e?this.setState({imgToAddDescription:this.imgDescription.value}):"size"==e&&this.setState({imgToAddWidth:this.imgSlider.value+"px"})}},{key:"renderPieces",value:function(e,t){var a=this;return i.a.createElement(x,{id:"wall-piece-"+t,currentWall:this.props.currentWall,artistPkId:e.artistPkId,wallId:e.wallId,key:t,index:t,imgSrc:e.src,getPieceInfo:this.getPieceInfo,handleImgDrag:function(e){return a.handleImgDrag(e)},handleImgDrop:function(e){return a.handleImgDrop(e)},x:e.x,y:e.y,width:e.w,height:e.h})}},{key:"getPieceInfo",value:function(e){this.setState({pieceToShow:this.state.pieces[e]})}},{key:"hidePieceInfo",value:function(){this.setState({pieceToShow:null})}},{key:"likePiece",value:function(){var e=this,t=this.state.pieceToShow;if(!t.likesPkIds.includes(this.props.user.pkId)){console.log("Liking piece...",t),this.setState({buffering:!0,loadingMessageIndex:Math.floor(Math.random()*this.state.loadingMessages.length)});var a={userPkId:this.props.user.pkId,piecePkId:t.pkId},o={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:a})};fetch("/like_piece",o).then((function(e){return e.json()})).then((function(t){"success"==t.status?(console.log("Like successful...",t),e.pieces[t.data.piece.index]=t.data.piece,e.setState({pieceToShow:t.data.piece,pieces:e.pieces,buffering:!1})):console.log("Like failed...",t)})).catch((function(e){console.log("Like error...",e)}))}}},{key:"hidePopUpWindow",value:function(){this.setState({errorWindowMsg:""})}},{key:"render",value:function(){var e=this,t=["#f5f5f5","#e0e0e0","#9e9e9e","#616161"];return i.a.createElement("div",{style:{cursor:this.state.mouseCursor},className:"wall-container"},i.a.createElement(C.DropTarget,null,i.a.createElement("div",{id:"wall-front",className:0==this.props.currentWall?"wall":"wall hide",ref:function(t){e.wall=t},style:{opacity:0==this.props.currentWall&&this.state.canPlace?1:.5,backgroundColor:t[0]}})),i.a.createElement(C.DropTarget,null,i.a.createElement("div",{id:"wall-right",className:1==this.props.currentWall?"wall":"wall hide",ref:function(t){e.wall=t},style:{opacity:1==this.props.currentWall&&this.state.canPlace?1:.5,backgroundColor:t[1]},onDragOver:function(t){return e.handleImgDrag(t)},onDrop:function(t){return e.handleImgDrop(t)}})),i.a.createElement(C.DropTarget,null,i.a.createElement("div",{id:"wall-back",className:2==this.props.currentWall?"wall":"wall hide",ref:function(t){e.wall=t},style:{opacity:2==this.props.currentWall&&this.state.canPlace?1:.5,backgroundColor:t[2]},onDragOver:function(t){return e.handleImgDrag(t)},onDrop:function(t){return e.handleImgDrop(t)}})),i.a.createElement(C.DropTarget,null,i.a.createElement("div",{id:"wall-left",className:3==this.props.currentWall?"wall":"wall hide",ref:function(t){e.wall=t},style:{opacity:3==this.props.currentWall&&this.state.canPlace?1:.5,backgroundColor:t[3]},onDragOver:function(t){return e.handleImgDrag(t)},onDrop:function(t){return e.handleImgDrop(t)}})),this.state.pieces.map((function(t,a){return e.renderPieces(t,a)})),i.a.createElement("img",{id:"hitbox",style:{pointerEvents:"none",display:"inline",position:"absolute",left:this.state.hitbox.x+"px",top:this.state.hitbox.y+"px"},src:this.state.hitbox.src,width:this.state.hitbox.w}),this.props.imgToAddSrc&&!this.props.imgToAddPlaced?i.a.createElement("div",{className:this.state.imgDragging?"image-to-add-container hide":"image-to-add-container"},i.a.createElement("div",{className:"image-to-add-text-inputs"},"Title: ",i.a.createElement("input",{className:"image-to-add-text-input",ref:function(t){e.imgTitle=t},type:"text",onChange:function(){return e.adjustImgProps("title")}}),i.a.createElement("br",null),"Description: ",i.a.createElement("input",{className:"image-to-add-text-input",ref:function(t){e.imgDescription=t},type:"text",onChange:function(){return e.adjustImgProps("description")}}),i.a.createElement("br",null)),"Adjust Image Size: ",i.a.createElement("input",{ref:function(t){e.imgSlider=t},type:"range",min:"30",max:"200",onChange:function(){return e.adjustImgProps("size")}}),i.a.createElement("br",null),this.state.mobileUser?i.a.createElement("img",{src:this.props.imgToAddSrc,id:"image-to-add",className:"image-to-add",ref:function(t){e.imgToAdd=t},draggable:"false",width:this.state.imgToAddWidth,onMouseDown:function(t){return e.setHitboxOffset(t)}}):i.a.createElement(C.DragDropContainer,{ref:function(t){e.imgToDrag=t},onDragStart:this.handleImgPick,onDrag:this.handleImgDrag,onDragEnd:this.handleImgDrop},i.a.createElement("img",{src:this.props.imgToAddSrc,id:"image-to-add",className:"image-to-add",ref:function(t){e.imgToAdd=t},draggable:"false",width:this.state.imgToAddWidth,onMouseDown:function(t){return e.setHitboxOffset(t)}})),i.a.createElement("br",null),this.state.mobileUser?"":"Click and Drag Image to Place"," ",i.a.createElement("br",null),i.a.createElement("div",{className:"ghost-button",onClick:this.autoPlace},"Auto Place")):"",i.a.createElement("div",{className:null!=this.state.pieceToShow?"wall-piece-info-container":"wall-piece-info-container hide"},i.a.createElement("span",{className:"close-window-button",onClick:this.hidePieceInfo},"+"),null!=this.state.pieceToShow?i.a.createElement("div",{className:"wall-piece-info-grid-container"},i.a.createElement("div",{className:"wall-piece-info-image-container"},"clear"!=this.state.pieceToShow.src?i.a.createElement("img",{src:this.state.pieceToShow.src,className:"wall-piece-info-image"}):""),i.a.createElement("div",{className:"wall-piece-info"},i.a.createElement("span",{className:"heading"},this.state.pieceToShow.title),i.a.createElement("span",{className:"subheading"},"By ",this.state.pieceToShow.artist),i.a.createElement("p",null,"Description: ",this.state.pieceToShow.description),i.a.createElement("svg",{className:this.state.pieceToShow.likesPkIds.includes(this.props.user.pkId)?"active":"unloved",onClick:this.likePiece},i.a.createElement("path",{d:"M34.692 0c-4.998 0-9.261 3.969-11.172 8.232C21.609 3.969 17.346 0 12.348 0 5.586 0 0 5.586 0 12.348c0 13.818 13.965 17.493 23.52 31.164 8.967-13.671 23.52-17.787 23.52-31.164C47.04 5.586 41.454 0 34.692 0z"})),i.a.createElement("span",{className:"likes-counter"},this.state.pieceToShow.numLikes))):""),i.a.createElement("div",{className:""!=this.state.errorWindowMsg?"error-window-container":"error-window-container hide"},i.a.createElement("span",{className:"close-window-button",onClick:this.hidePopUpWindow},"+"),i.a.createElement("span",{className:"heading"},this.state.errorWindowMsg)),this.state.buffering&&""!=this.props.user.fbId?i.a.createElement("div",{className:"buffering-container"},i.a.createElement("span",{className:"heading"},i.a.createElement("i",null,"Loading Data..."),i.a.createElement("br",null),this.state.loadingMessages[this.state.loadingMessageIndex],i.a.createElement("br",null),i.a.createElement("br",null),0!=this.state.bufferingCounter?this.state.bufferingCounter:"")):"",i.a.createElement("canvas",{id:"hidden-canvas",ref:function(t){e.hiddenCanvas=t},style:{display:"none"}}))}}]),a}(i.a.Component),P=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={loggedIn:!1,serverRoute:"http://localhost:5000",showArtButtons:!1,buffering:!0,pieceAdded:!0,mode:"view",addingImg:!1,imgToAddSrc:"",showForceLogin:!0,errorWindowMsg:"",currentWall:0,user:{username:"",fbId:"",pkId:-1,profilePicture:"",numPieces:0,maxNumPieces:1}},o.toggleMode=o.toggleMode.bind(Object(c.a)(o)),o.login=o.login.bind(Object(c.a)(o)),o.unAuthLogin=o.unAuthLogin.bind(Object(c.a)(o)),o.addImgToWall=o.addImgToWall.bind(Object(c.a)(o)),o.pieceAddedToWall=o.pieceAddedToWall.bind(Object(c.a)(o)),o.toggleShowOptions=o.toggleShowOptions.bind(Object(c.a)(o)),o.hidePopUpWindow=o.hidePopUpWindow.bind(Object(c.a)(o)),o.updateUser=o.updateUser.bind(Object(c.a)(o)),o.changeWall=o.changeWall.bind(Object(c.a)(o)),o.changeBufferingStatus=o.changeBufferingStatus.bind(Object(c.a)(o)),o}return Object(l.a)(a,[{key:"toggleMode",value:function(e){"doodle"==e&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?this.setState({errorWindowMsg:"You're going to have to use a computer to add a doodle, because I can't program on mobile devices! Fortunately, you can still select \"Add Image\" to put an image on the wall with your mobile device."}):this.state.user.numPieces<this.state.user.maxNumPieces?this.setState({showArtButtons:!this.state.showArtButtons,mode:e}):"view"!=e&&this.state.user.numPieces>=this.state.user.maxNumPieces&&this.state.user.fbId.includes("unauth_user")?this.setState({showForceLogin:!0}):"view"!=e&&this.state.user.numPieces>=this.state.user.maxNumPieces&&!this.state.user.fbId.includes("unauth_user")&&this.setState({errorWindowMsg:"You've reached the maximum number of pieces that you can add to the wall! Congratulations!"})}},{key:"login",value:function(e){var t=this;console.log("User logging in...",e);var a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})};fetch("/login",a).then((function(e){return e.json()})).then((function(e){"success"==e.status?(console.log("Login successful...",e),t.setState({loggedIn:e.data.user.authenticated,showForceLogin:!1,user:{username:e.data.user.username,fbId:e.data.user.fbId,pkId:e.data.user.pkId,profilePicture:e.data.user.profilePicture,numPieces:e.data.user.numPieces,maxNumPieces:e.data.user.maxNumPieces}}),t.hidePopUpWindow()):console.log("Login failed...",e)})).catch((function(e){console.log("Login error...",e)}))}},{key:"unAuthLogin",value:function(){var e=g.a.get("userId");if(void 0==e){var t="unauth_user_"+Date.now()+"_"+Math.random();g.a.set("userId",t);var a={username:"Unknown Artist "+t.split("_")[2],picture:"",userId:t};this.login(a)}else{var o={username:"Unknown Artist "+e.split("_")[2],picture:"",userId:e};this.login(o)}}},{key:"addImgToWall",value:function(e){this.setState({imgToAddSrc:e,imgToAddPlaced:!1,addingImg:!0,showArtButtons:!1,pieceAdded:!1})}},{key:"pieceAddedToWall",value:function(){var e=this.state.user;e.numPieces+=1,this.setState({mode:"view",user:e,pieceAdded:!0,addingImg:!1,imgToAddPlaced:!0})}},{key:"toggleShowOptions",value:function(){this.setState({showArtButtons:!this.state.showArtButtons})}},{key:"hidePopUpWindow",value:function(){this.setState({showForceLogin:!1,errorWindowMsg:""})}},{key:"updateUser",value:function(e){console.log("Updated User: ",e),this.setState({user:e})}},{key:"changeWall",value:function(){3==this.state.currentWall?this.setState({currentWall:0}):this.setState({currentWall:this.state.currentWall+1}),this.toggleMode("view")}},{key:"changeBufferingStatus",value:function(e){this.setState({buffering:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"wrapper"},i.a.createElement("header",{className:"primary"},i.a.createElement("nav",null,i.a.createElement("span",{className:"heading"},"Regret"),i.a.createElement("ul",{className:"nav-buttons links"},i.a.createElement("li",null,i.a.createElement(f,{login:this.login})),i.a.createElement("li",null,this.state.user.username.length>0?"Welcome "+this.state.user.username.split(" ")[0]:""),i.a.createElement("li",null,this.state.user.numPieces>-1?"Contributions Left: "+(this.state.user.maxNumPieces-this.state.user.numPieces):"")))),i.a.createElement("main",{className:"primary"},i.a.createElement("article",null,i.a.createElement(E,{id:0,currentWall:this.state.currentWall,user:this.state.user,updateUser:this.updateUser,imgToAddSrc:this.state.imgToAddSrc,imgToAddPlaced:this.state.imgToAddPlaced,pieceAddedToWall:this.pieceAddedToWall,changeBufferingStatus:this.changeBufferingStatus}),this.state.pieceAdded&&!this.state.buffering?i.a.createElement("div",null,i.a.createElement("div",{className:this.state.showArtButtons?"art-options":"art-options hide"},i.a.createElement("span",null,"Logged in as ",this.state.user.username)," ",i.a.createElement("br",null),i.a.createElement("span",null,"Additions Remaining: ",this.state.user.maxNumPieces-this.state.user.numPieces),i.a.createElement("a",{className:"art-option-button",onClick:function(){return e.toggleMode("doodle")}},"Add Doodle"),i.a.createElement("a",{className:"art-option-button",onClick:function(){return e.toggleMode("img")}},"Add Image"),i.a.createElement("a",{className:"art-option-button",onClick:this.changeWall},"Next Wall")),i.a.createElement("a",{className:this.state.showArtButtons?"round-button active":"round-button",onClick:function(){return e.toggleShowOptions()}},"+")):""),i.a.createElement("article",null,i.a.createElement("div",{className:"doodle"!=this.state.mode||this.state.addingImg?"editing-container hide":"editing-container"},"doodle"!=this.state.mode||this.state.addingImg?"":i.a.createElement(w,{toggleMode:this.toggleMode,addImgToWall:this.addImgToWall})),i.a.createElement("div",{className:"img"!=this.state.mode||this.state.addingImg?"editing-container hide":"editing-container"},"img"!=this.state.mode||this.state.addingImg?"":i.a.createElement(y,{toggleMode:this.toggleMode,addImgToWall:this.addImgToWall}))),i.a.createElement("article",null,i.a.createElement("div",{className:this.state.showForceLogin&&!this.state.loggedIn?"force-login-container":"force-login-container hide"},/Android/i.test(navigator.userAgent)?i.a.createElement("span",{className:"heading"},"Nope... No Android, sorry... Just get on a computer..."):i.a.createElement("div",null,this.state.user.numPieces>=this.state.user.maxNumPieces?i.a.createElement("span",{className:"close-window-button",onClick:this.hidePopUpWindow},"+"):"",i.a.createElement("span",{className:"heading"},this.state.user.numPieces<this.state.user.maxNumPieces?"Would You Like to Login with Facebook?":"Login to Contribute More to the Wall!"),i.a.createElement("div",{className:"force-login-button-container"},this.state.user.numPieces<this.state.user.maxNumPieces?i.a.createElement("a",{className:"button",onClick:this.unAuthLogin},"Hahaha... No."):"",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Sorry, you can't login to Facebook on a mobile device...":i.a.createElement(f,{login:this.login}))))),i.a.createElement("article",null,i.a.createElement("div",{className:""!=this.state.errorWindowMsg?"error-window-container":"error-window-container hide"},i.a.createElement("span",{className:"close-window-button",onClick:this.hidePopUpWindow},"+"),i.a.createElement("span",{className:"heading"},this.state.errorWindowMsg)))))}}]),a}(i.a.Component);n.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(P,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.2b27169f.chunk.js.map