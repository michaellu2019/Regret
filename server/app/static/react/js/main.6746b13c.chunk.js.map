{"version":3,"sources":["components/FacebookLoginButton.js","components/ColorSelector.js","components/StrokeWeightSelector.js","components/ImageSelector.js","components/AddDoodle.js","components/AddImage.js","components/WallPiece.js","components/Wall.js","App.js","index.js"],"names":["FacebookLoginButton","props","state","auth","user","username","picture","userId","componentClicked","bind","responseFacebook","console","log","response","status","this","setState","name","data","url","userID","login","facebookData","appId","autoLoad","fields","onClick","callback","React","Component","ColorSelector","hide","currentColor","toggleShowSelector","colorType","color","changeColor","className","style","background","backgroundColor","StrokeWeightSelector","currentWeight","weight","changeStrokeWeight","ImageSelector","imgSrc","loadImgUrl","loadImgFile","useImg","e","img","Image","src","URL","createObjectURL","target","files","that","onload","imgW","naturalWidth","imgH","naturalHeight","urlInput","value","show","type","accept","id","onChange","htmlFor","d","ref","placeholder","AddDoodle","isPainting","strokeColor","fillColor","strokeWeight","prevMousePos","x","y","prevDragMousePos","imgToPlace","aspectRatio","strokes","lines","rects","ellipses","images","elements","undos","mode","showImageSelect","toggleMode","initCanvas","getMousePos","onMouseDown","onMouseMove","endPaintEvent","showStroke","showErase","showRect","showImg","renderCanvas","undo","redo","clearCanvas","save","window","addEventListener","canvas","width","doodleCanvasContainer","clientWidth","height","clientHeight","ctx","getContext","rect","getBoundingClientRect","left","top","nativeEvent","currMousePos","showLine","showEllipse","imgObj","offsetMousePos","prevPos","currPos","create","stroke","pos","nextPos","strokeStyle","lineWidth","beginPath","lineJoin","moveTo","lineTo","closePath","push","eraser","line","size","w","h","fillStyle","fillRect","ellipse","Math","abs","PI","fill","obj","drawImage","i","length","element","undefined","pop","toDataURL","addImgToWall","marginRight","title","x1","y1","x2","y2","strokeWidth","cx","cy","r","transform","marginLeft","onTouchStart","onMouseLeave","onMouseUp","onTouchEnd","onTouchCancel","onTouchMove","AddImage","WallPiece","wallId","currentWall","getPieceInfo","index","artistPkId","draggable","Wall","pieces","hitboards","canPlace","imgToAddTitle","imgToAddDescription","imgToAddWidth","imgDragging","hitbox","pieceToShow","buffering","bufferingCounter","loadingMessageIndex","loadingMessages","imgToAddSrc","mobileUser","errorWindowMsg","loadPieces","createHitboard","addPieceToHitboard","checkPieceClear","setHitboxOffset","handleImgPick","handleImgDrag","handleImgDrop","getOpenSpot","autoPlace","renderPieces","adjustImgProps","hidePieceInfo","likePiece","hidePopUpWindow","bufferingTick","startBufferingCountdown","intervalHandle","floor","random","test","navigator","userAgent","clearInterval","setInterval","fetch","method","headers","then","json","responseData","changeBufferingStatus","catch","error","hitboard","wall","row","piece","hitboxOffset","pageX","document","getElementById","scrollX","pageY","scrollY","imgToAddPlaced","imgToAdd","dragData","hitboxClear","pkId","artist","description","likesPkIds","numLikes","crossOrigin","scalingFactor","hiddenCanvas","b64URI","replace","requestOptions","body","JSON","stringify","pieceAddedToWall","updatedUser","fbId","profilePicture","numPieces","maxNumPieces","updateUser","perimeterClear","areaClear","j","openSpot","adjustment","imgTitle","imgDescription","imgSlider","key","includes","userPkId","piecePkId","wallColors","cursor","mouseCursor","opacity","onDragOver","onDrop","map","pointerEvents","display","position","min","max","imgToDrag","onDragStart","onDrag","onDragEnd","App","loggedIn","serverRoute","showArtButtons","pieceAdded","addingImg","showForceLogin","unAuthLogin","toggleShowOptions","changeWall","authenticated","Cookies","get","unauthUserId","Date","now","set","split","userUpdated","ReactDOM","render","StrictMode"],"mappings":"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","file":"js/main.6746b13c.chunk.js","sourcesContent":["import React from 'react';\r\nimport FacebookLoginBtn from 'react-facebook-login';\r\n\r\nclass FacebookLoginButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tauth: false,\r\n\t\t\tuser: {\r\n\t\t\t\tusername: '',\r\n\t\t\t\tpicture: '',\r\n\t\t\t\tuserId: ''\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.componentClicked = this.componentClicked.bind(this);\r\n\t\tthis.responseFacebook = this.responseFacebook.bind(this);\r\n\t}\r\n\r\n\tcomponentClicked() {\r\n\t\tconsole.log('Button clicked...');\r\n\t}\r\n\r\n\tresponseFacebook(response) {\r\n\t\tif (response.status != 'unknown') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tauth: true,\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tusername: response.name,\r\n\t\t\t\t\tpicture: response.picture.data.url,\r\n\t\t\t\t\tuserId: response.userID\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.login(this.state.user);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet facebookData;\r\n\r\n\t\tif (this.state.auth) {\r\n\t\t\t//facebookData = (<div>Welcome {this.state.user.username.split(' ')[0]}</div>);\r\n\t\t} else {\r\n\t\t\tfacebookData = (<FacebookLoginBtn appId = \"245982219776305\" autoLoad = {false} fields = \"name,picture\" onClick = {this.componentClicked} callback = {this.responseFacebook} />);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>{facebookData}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FacebookLoginButton;","import React from 'react';\r\n\r\nclass ColorSelector extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thide: true,\r\n\t\t\tcurrentColor: 'white'\r\n\t\t};\r\n\t\tthis.toggleShowSelector = this.toggleShowSelector.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.colorType == 'strokeColor') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentColor: 'black'\r\n\t\t\t});\r\n\t\t} else if (this.props.colorType == 'fillColor') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentColor: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleShowSelector(hide) {\r\n\t\tthis.setState({\r\n\t\t\thide: hide\r\n\t\t});\r\n\t}\r\n\r\n\tchangeColor(color) {\r\n\t\tthis.toggleShowSelector(true);\r\n\t\tthis.setState({\r\n\t\t\tcurrentColor: color\r\n\t\t});\r\n\t\tthis.props.changeColor(color, this.props.colorType);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className = \"color-select-container\">\r\n\t\t\t\t<div style = {this.state.currentColor == \"none\" ? {background: \"linear-gradient(white, black)\"} : {backgroundColor: this.state.currentColor}} className = \"color-select-head\" onClick = {() => this.toggleShowSelector(!this.state.hide)}></div>\r\n\t\t\t\t<div className = {this.state.hide ? \"color-select-options hide\" : \"color-select-options\"}>\r\n\t\t\t\t\t{this.props.colorType != 'backgroundColor' ? <div style = {{background: \"linear-gradient(white, black)\"}} className = \"color-select-box\" onClick = {() => this.changeColor('none')}></div> : ''}\r\n\t\t\t\t\t<div style = {{backgroundColor: 'red'}} className = \"color-select-box\" onClick = {() => this.changeColor('red')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'orange'}} className = \"color-select-box\" onClick = {() => this.changeColor('orange')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'gold'}} className = \"color-select-box\" onClick = {() => this.changeColor('gold')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'yellow'}} className = \"color-select-box\" onClick = {() => this.changeColor('yellow')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'lime'}} className = \"color-select-box\" onClick = {() => this.changeColor('lime')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'green'}} className = \"color-select-box\" onClick = {() => this.changeColor('green')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'cyan'}} className = \"color-select-box\" onClick = {() => this.changeColor('cyan')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'blue'}} className = \"color-select-box\" onClick = {() => this.changeColor('blue')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'indigo'}} className = \"color-select-box\" onClick = {() => this.changeColor('indigo')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'purple'}} className = \"color-select-box\" onClick = {() => this.changeColor('purple')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'violet'}} className = \"color-select-box\" onClick = {() => this.changeColor('violet')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'pink'}} className = \"color-select-box\" onClick = {() => this.changeColor('pink')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'black'}} className = \"color-select-box\" onClick = {() => this.changeColor('black')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'gray'}} className = \"color-select-box\" onClick = {() => this.changeColor('gray')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'white'}} className = \"color-select-box\" onClick = {() => this.changeColor('white')}></div>\r\n\t\t\t\t\t<div style = {{backgroundColor: 'chocolate'}} className = \"color-select-box\" onClick = {() => this.changeColor('chocolate')}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ColorSelector;","import React from 'react';\r\n\r\nclass StrokeWeightSelector extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thide: true,\r\n\t\t\tcurrentWeight: 1\r\n\t\t};\r\n\t\tthis.toggleShowSelector = this.toggleShowSelector.bind(this);\r\n\t}\r\n\r\n\ttoggleShowSelector(hide) {\r\n\t\tthis.setState({\r\n\t\t\thide: hide\r\n\t\t});\r\n\t}\r\n\r\n\tchangeStrokeWeight(weight) {\r\n\t\tthis.toggleShowSelector(true);\r\n\t\tthis.setState({\r\n\t\t\tcurrentWeight: weight\r\n\t\t});\r\n\t\tthis.props.changeStrokeWeight(weight);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className = \"size-select-container\">\r\n\t\t\t\t<div className = \"size-select-head\" onClick = {() => this.toggleShowSelector(!this.state.hide)}>{this.state.currentWeight}</div>\r\n\t\t\t\t<div className = {this.state.hide ? \"size-select-options hide\" : \"size-select-options\"}>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(1)}>1</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(3)}>3</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(5)}>5</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(7)}>7</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(9)}>9</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(11)}>11</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(13)}>13</div>\r\n\t\t\t\t\t<div className = \"size-select-box\" onClick = {() => this.changeStrokeWeight(15)}>15</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default StrokeWeightSelector;","import React from 'react';\r\n\r\nclass ImageSelector extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\timgSrc: ''\r\n\t\t};\r\n\t\tthis.loadImgUrl = this.loadImgUrl.bind(this);\r\n\t\tthis.loadImgFile = this.loadImgFile.bind(this);\r\n\t\tthis.useImg = this.useImg.bind(this);\r\n\t}\r\n\r\n\tloadImgFile(e) {\r\n\t\tconst img = new Image();\r\n\t\timg.src = URL.createObjectURL(e.target.files[0]);\r\n\t\tvar that = this;\r\n\t\timg.onload = function() {\r\n\t\t\tthat.setState({\r\n\t\t\t\timgSrc: this.src,\r\n\t\t\t\timgW: this.naturalWidth,\r\n\t\t\t\timgH: this.naturalHeight\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tloadImgUrl() {\r\n\t\tconst img = new Image();\r\n\t\timg.src = this.urlInput.value;\r\n\t\tvar that = this;\r\n\t\timg.onload = function() {\r\n\t\t\tthat.setState({\r\n\t\t\t\timgSrc: this.src,\r\n\t\t\t\timgW: this.naturalWidth,\r\n\t\t\t\timgH: this.naturalHeight\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tuseImg() {\r\n\t\tthis.props.useImg(this.state.imgSrc, this.state.imgW, this.state.imgH);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className = {this.props.show ? \"image-selector\" : \"image-selector hide\"}>\r\n\t\t\t\t<div className = \"image-inputs\">\r\n\t\t\t\t\t<input type = \"file\" accept = \"image/*\" id = \"input-image-file\" onChange = {this.loadImgFile} />\r\n\t\t\t\t\t<label id = \"input-image-file-label\" className = \"ghost-button\" htmlFor = \"input-image-file\">\r\n\t\t\t\t\t\t<svg><g><path className = \"st0\" d = \"M9.825 15.275h4.375V10.9h2.925L12 5.8 6.9 10.9h2.925V15.275zM6.9 16.75h10.2v1.45H6.9V16.75z\" /></g></svg>\r\n\t\t\t\t\t\tUpload Image\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<input ref = {(ref) => {this.urlInput = ref}} type = \"text\" id = \"input-image-url\" placeholder = \" Enter URL\" onChange = {this.loadImgUrl} /> <br />\r\n\t\t\t\t</div>\r\n\t\t\t\tImage Preview: <br /> \r\n  \t\t\t\t<div className = {this.state.imgSrc != '' ? \"image-selector-preview\" : \"image-selector-preview hide\"}>\r\n\t  \t\t\t\t<div className = \"ghost-button\" id = \"choose-image\" onClick = {this.useImg}>Use Image</div> <br />\r\n\t\t\t\t\t<img ref = {(ref) => {this.img = ref}} src = {this.state.imgSrc} />\r\n\t  \t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ImageSelector;","// Source Code: https://github.com/christiannwamba/react-paintapp/blob/master/src/canvas.js\r\nimport React from 'react';\r\n\r\nimport ColorSelector from './ColorSelector';\r\nimport StrokeWeightSelector from './StrokeWeightSelector';\r\nimport ImageSelector from './ImageSelector';\r\n\r\nclass AddDoodle extends React.Component {\r\n\tisPainting = false;\r\n\tbackgroundColor = '#ffffff';\r\n\tstrokeColor = '#000000';\r\n\tfillColor = 'none';\r\n\tstrokeWeight = 1;\r\n\tprevMousePos = {x: 0, y: 0};\r\n\tprevDragMousePos = {x: 0, y: 0};\r\n\timgToPlace = {src: '', aspectRatio: 1};\r\n\tstrokes = [];\r\n\tlines = [];\r\n\trects = [];\r\n\tellipses = [];\r\n\timages = [];\r\n\telements = [];\r\n\tundos = [];\r\n\tmode = 'stroke';\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tbackgroundColor: '#ffffff',\r\n\t\t\telements: [],\r\n\t\t\tmode: 'stroke',\r\n\t\t\tshowImageSelect: false\r\n\t\t};\r\n\t\tthis.toggleMode = this.toggleMode.bind(this);\r\n\t\tthis.initCanvas = this.initCanvas.bind(this);\r\n\t\tthis.getMousePos = this.getMousePos.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.endPaintEvent = this.endPaintEvent.bind(this);\r\n        this.useImg = this.useImg.bind(this);\r\n        this.showStroke = this.showStroke.bind(this);\r\n        this.showErase = this.showErase.bind(this);\r\n        this.showRect = this.showRect.bind(this);\r\n        this.showImg = this.showImg.bind(this);\r\n        this.renderCanvas = this.renderCanvas.bind(this);\r\n        this.changeColor = this.changeColor.bind(this);\r\n        this.changeStrokeWeight = this.changeStrokeWeight.bind(this);\r\n        this.undo = this.undo.bind(this);\r\n        this.redo = this.redo.bind(this);\r\n        this.clearCanvas = this.clearCanvas.bind(this);\r\n        this.save = this.save.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.initCanvas();\r\n\t\twindow.addEventListener('resize', this.initCanvas);\r\n\t}\r\n\r\n\ttoggleMode(mode) {\r\n\t\tthis.setState({\r\n\t\t\tmode: mode,\r\n\t\t\tshowImageSelect: false\r\n\t\t});\r\n\t\tthis.mode = mode;\r\n\r\n\t\tif (mode == 'img') {\r\n\t\t\tthis.imgToPlace = {src: '', aspectRatio: 1};\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowImageSelect: true\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinitCanvas() {\r\n\t\tthis.canvas.width = this.doodleCanvasContainer.clientWidth;\r\n\t\tthis.canvas.height = this.doodleCanvasContainer.clientHeight;\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t\tthis.renderCanvas();\r\n\t}\r\n\r\n\tgetMousePos(e) {\r\n\t\tconst rect = this.canvas.getBoundingClientRect();\r\n\t\treturn {x: e.x - rect.left, y: e.y - rect.top};\r\n\t}\r\n\r\n\tonMouseDown({nativeEvent}) {\r\n\t\tthis.isPainting = true;\r\n\t\tthis.prevMousePos = this.getMousePos(nativeEvent);\r\n\r\n\t\tif (this.mode == 'line' || this.mode == 'rect' || this.mode == 'ellipse' || this.mode == 'img') {\r\n\t\t\tthis.prevDragMousePos = this.prevMousePos;\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMove({nativeEvent}) {\r\n\t\tif (this.isPainting) {\r\n\t\t\tconst currMousePos = this.getMousePos(nativeEvent);\r\n\r\n\t\t\tif (this.mode == 'stroke') {\r\n\t\t\t\tthis.showStroke(this.prevMousePos, currMousePos, this.strokeColor, this.strokeWeight, true);\r\n\t\t\t} else if (this.mode == 'eraser') {\r\n\t\t\t\tthis.showErase(this.prevMousePos, currMousePos, this.strokeWeight, true);\r\n\t\t\t} else if (this.mode == 'line') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showLine(this.prevDragMousePos, currMousePos, this.strokeColor, this.strokeWeight, false);\r\n\t\t\t} else if (this.mode == 'rect') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showRect(this.prevDragMousePos, currMousePos, this.strokeColor, this.strokeWeight, this.fillColor, false);\r\n\t\t\t} else if (this.mode == 'ellipse') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showEllipse(this.prevDragMousePos, currMousePos, this.strokeColor, this.strokeWeight, this.fillColor, false);\r\n\t\t\t} else if (this.mode == 'img') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tvar imgObj = new Image();\r\n\t\t\t\timgObj.src = this.imgToPlace.src;\r\n\t\t\t\timgObj.ctx = this.ctx;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\timgObj.onload = function() {\r\n\t\t\t\t\tthat.showImg(imgObj, that.prevDragMousePos, currMousePos, false);\r\n\t\t\t\t}\r\n\t\t\t} \r\n\r\n\t\t\tthis.prevMousePos = currMousePos;\r\n\t\t}\r\n\t}\r\n\r\n\tendPaintEvent({nativeEvent}) {\r\n\t\tif (this.isPainting) {\r\n\t\t\tthis.isPainting = false;\r\n\t\t\tconst offsetMousePos = {x: this.prevMousePos.x + 0.5, y: this.prevMousePos.y + 0.5};\r\n\r\n\t\t\tif (this.mode == 'stroke') {\r\n\t\t\t\tthis.showStroke(this.prevMousePos, offsetMousePos, this.strokeColor, this.strokeWeight, true);\r\n\t\t\t} else if (this.mode == 'eraser') {\r\n\t\t\t\tthis.showErase(this.prevMousePos, offsetMousePos, this.strokeWeight, true);\r\n\t\t\t} else if (this.mode == 'line') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showLine(this.prevDragMousePos, this.prevMousePos, this.strokeColor, this.strokeWeight, true);\r\n\t\t\t} else if (this.mode == 'rect') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showRect(this.prevDragMousePos, this.prevMousePos, this.strokeColor, this.strokeWeight, this.fillColor, true);\r\n\t\t\t} else if (this.mode == 'ellipse') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.showEllipse(this.prevDragMousePos, this.prevMousePos, this.strokeColor, this.strokeWeight, this.fillColor, true);\r\n\t\t\t} else if (this.mode == 'img') {\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\tvar imgObj = new Image();\r\n\t\t\t\timgObj.src = this.imgToPlace.src;\r\n\t\t\t\timgObj.ctx = this.ctx;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\timgObj.onload = function() {\r\n\t\t\t\t\tthat.showImg(imgObj, that.prevDragMousePos, that.prevMousePos, true);\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}\r\n\t}\r\n\r\n\tshowStroke(prevPos, currPos, color, strokeWeight, create) {\r\n\t\tconst stroke = {\r\n\t\t\ttype: 'stroke',\r\n\t\t\tstrokeColor: color,\r\n\t\t\tstrokeWeight: strokeWeight,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t};\r\n\r\n\t\tif (stroke.strokeColor != 'none') {\r\n\t\t\tthis.ctx.strokeStyle = stroke.strokeColor;\r\n\t\t\tthis.ctx.lineWidth = stroke.strokeWeight;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.lineJoin = 'round';\r\n\t\t\tthis.ctx.moveTo(stroke.pos.x, stroke.pos.y);\r\n\t\t\tthis.ctx.lineTo(stroke.nextPos.x, stroke.nextPos.y);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.strokes.push(stroke);\r\n\t\t\tthis.elements.push(stroke);\r\n\t\t}\r\n\t}\r\n\r\n\tshowErase(prevPos, currPos, strokeWeight, create) {\r\n\t\tconst eraser = {\r\n\t\t\ttype: 'eraser',\r\n\t\t\tstrokeColor: this.backgroundColor,\r\n\t\t\tstrokeWeight: strokeWeight,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t};\r\n\r\n\t\tif (eraser.strokeColor != 'none') {\r\n\t\t\tthis.ctx.strokeStyle = eraser.strokeColor;\r\n\t\t\tthis.ctx.lineWidth = eraser.strokeWeight;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.lineJoin = 'round';\r\n\t\t\tthis.ctx.moveTo(eraser.pos.x, eraser.pos.y);\r\n\t\t\tthis.ctx.lineTo(eraser.nextPos.x, eraser.nextPos.y);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.strokes.push(eraser);\r\n\t\t\tthis.elements.push(eraser);\r\n\t\t}\r\n\t}\r\n\r\n\tshowLine(prevPos, currPos, color, strokeWeight, create) {\r\n\t\tconst line = {\r\n\t\t\ttype: 'line',\r\n\t\t\tstrokeColor: color,\r\n\t\t\tstrokeWeight: strokeWeight,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t}\r\n\r\n\t\tif (line.strokeColor != 'none') {\r\n\t\t\tthis.ctx.strokeStyle = line.strokeColor;\r\n\t\t\tthis.ctx.lineWidth = line.strokeWeight;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.moveTo(line.pos.x, line.pos.y);\r\n\t\t\tthis.ctx.lineTo(line.nextPos.x, line.nextPos.y);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.lines.push(line);\r\n\t\t\tthis.elements.push(line);\r\n\t\t}\r\n\t}\r\n\r\n\tshowRect(prevPos, currPos, strokeColor, strokeWeight, fillColor, create) {\r\n\t\tconst rect = {\r\n\t\t\ttype: 'rect',\r\n\t\t\tstrokeColor: strokeColor,\r\n\t\t\tstrokeWeight: strokeWeight,\r\n\t\t\tfillColor: fillColor,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t\tsize: {w: currPos.x - prevPos.x, h: currPos.y - prevPos.y}\r\n\t\t}\r\n\r\n\r\n\t\tif (rect.strokeColor != 'none') {\r\n\t\t\tthis.ctx.strokeStyle = rect.strokeColor;\r\n\t\t\tthis.ctx.lineWidth = rect.strokeWeight;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.lineJoin = 'miter';\r\n\t\t\tthis.ctx.rect(rect.pos.x, rect.pos.y, rect.size.w, rect.size.h);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tif (rect.fillColor != 'none') {\r\n\t\t\tthis.ctx.fillStyle = rect.fillColor;\r\n\t\t\tthis.ctx.fillRect(rect.pos.x, rect.pos.y, rect.size.w, rect.size.h);\r\n\t\t}\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.rects.push(rect);\r\n\t\t\tthis.elements.push(rect);\r\n\t\t}\r\n\t}\r\n\r\n\tshowEllipse(prevPos, currPos, strokeColor, strokeWeight, fillColor, create) {\r\n\t\tconst ellipse = {\r\n\t\t\ttype: 'ellipse',\r\n\t\t\tstrokeColor: strokeColor,\r\n\t\t\tstrokeWeight: strokeWeight,\r\n\t\t\tfillColor: fillColor,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t\tsize: {w: currPos.x - prevPos.x, h: currPos.y - prevPos.y}\r\n\t\t}\r\n\r\n\r\n\t\tif (ellipse.strokeColor != 'none') {\r\n\t\t\tthis.ctx.strokeStyle = ellipse.strokeColor;\r\n\t\t\tthis.ctx.lineWidth = ellipse.strokeWeight;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.ellipse((ellipse.pos.x + ellipse.nextPos.x)/2, (ellipse.pos.y + ellipse.nextPos.y)/2, Math.abs(ellipse.size.w/2), Math.abs(ellipse.size.h/2), 0, 0, 2 * Math.PI);\r\n\t\t\tthis.ctx.closePath();\r\n\t\t\tthis.ctx.stroke();\r\n\t\t}\r\n\r\n\t\tif (ellipse.fillColor != 'none') {\r\n\t\t\tthis.ctx.fillStyle = ellipse.fillColor;\r\n\t\t\tthis.ctx.beginPath();\r\n\t\t\tthis.ctx.ellipse((ellipse.pos.x + ellipse.nextPos.x)/2, (ellipse.pos.y + ellipse.nextPos.y)/2, Math.abs(ellipse.size.w/2), Math.abs(ellipse.size.h/2), 0, 0, 2 * Math.PI);\r\n\t\t\tthis.ctx.fill();\r\n\t\t}\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.ellipses.push(ellipse);\r\n\t\t\tthis.elements.push(ellipse);\r\n\t\t}\r\n\t}\r\n\r\n\tshowImg(imgObj, prevPos, currPos, create) {\r\n\t\tconst img = {\r\n\t\t\ttype: 'img',\r\n\t\t\tsrc: this.imgToPlace.src,\r\n\t\t\tobj: imgObj,\r\n\t\t\tpos: prevPos,\r\n\t\t\tnextPos: currPos,\r\n\t\t\tsize: {w: (currPos.y - prevPos.y) * (imgObj.width/imgObj.height), h: currPos.y - prevPos.y}\r\n\t\t}\r\n\r\n\t\tthis.ctx.drawImage(img.obj, img.pos.x, img.pos.y, img.size.w, img.size.h);\r\n\r\n\t\tif (create) {\r\n\t\t\tthis.images.push(img);\r\n\t\t\tthis.elements.push(img);\r\n\t\t}\r\n\t}\r\n\r\n\tuseImg(src, w, h) {\r\n\t\tthis.imgToPlace.src = src;\r\n\t\tthis.imgToPlace.aspectRatio = w/h;\r\n\t\tthis.setState({\r\n\t\t\tshowImageSelect: false\r\n\t\t});\r\n\t}\r\n\r\n\trenderCanvas() {\r\n\t\tthis.ctx.fillStyle = this.backgroundColor;\r\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n\t\tfor (var i = 0; i < this.elements.length; i++) {\r\n\t\t\tvar element = this.elements[i];\r\n\t\t\tif (element != undefined && element != null) {\r\n\t\t\t\tif (element.type == 'stroke') {\r\n\t\t\t\t\tthis.showStroke(element.pos, element.nextPos, element.strokeColor, element.strokeWeight, false);\r\n\t\t\t\t} else if (element.type == 'eraser') {\r\n\t\t\t\t\tthis.showErase(element.pos, element.nextPos, element.strokeWeight, false);\r\n\t\t\t\t} else if (element.type == 'line') {\r\n\t\t\t\t\tthis.showLine(element.pos, element.nextPos, element.strokeColor, element.strokeWeight, false);\r\n\t\t\t\t} else if (element.type == 'rect') {\r\n\t\t\t\t\tthis.showRect(element.pos, element.nextPos, element.strokeColor, element.strokeWeight, element.fillColor, false);\r\n\t\t\t\t} else if (element.type == 'ellipse') {\r\n\t\t\t\t\tthis.showEllipse(element.pos, element.nextPos, element.strokeColor, element.strokeWeight, element.fillColor, false);\r\n\t\t\t\t}  else if (element.type == 'img') {\r\n\t\t\t\t\tthis.showImg(element.obj, element.pos, element.nextPos, false);\r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tchangeColor(color, colorType) {\r\n\t\tif (colorType == 'backgroundColor') {\r\n\t\t\tthis.backgroundColor = color;\r\n\t\t\tthis.setState({\r\n\t\t\t\tbackgroundColor: color\r\n\t\t\t});\r\n\t\t} else if (colorType == 'strokeColor') {\r\n\t\t\tthis.strokeColor = color;\r\n\t\t} else if (colorType == 'fillColor') {\r\n\t\t\tthis.fillColor = color;\r\n\t\t}\r\n\t\tthis.renderCanvas();\r\n\t}\r\n\r\n\tchangeStrokeWeight(weight) {\r\n\t\tthis.strokeWeight = weight;\r\n\t}\r\n\r\n\tundo() {\r\n\t\tconst element = this.elements.pop();\r\n\t\tthis.undos.push(element);\r\n\t\tthis.renderCanvas();\r\n\r\n\t\tif (element != undefined && element != null && element.type == 'stroke') {\r\n\t\t\tvar i = 0;\r\n\t\t\twhile (element != undefined && element != null && element.type == 'stroke' && i < 5) {\r\n\t\t\t\tconst element = this.elements.pop();\r\n\t\t\t\tthis.undos.push(element);\r\n\t\t\t\tthis.renderCanvas();\r\n\t\t\t\ti += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tredo() {\r\n\t\tif (this.undos.length > 0) {\r\n\t\t\tconst element = this.undos.pop();\r\n\t\t\tthis.elements.push(element);\r\n\t\t\tthis.renderCanvas();\r\n\r\n\t\t\tif (element != undefined && element != null && element.type == 'stroke') {\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\twhile (element != undefined && element != null && element.type == 'stroke' && i < 5) {\r\n\t\t\t\t\tconst element = this.undos.pop();\r\n\t\t\t\t\tthis.elements.push(element);\r\n\t\t\t\t\tthis.renderCanvas();\r\n\t\t\t\t\ti += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearCanvas() {\r\n\t\tthis.strokes = [];\r\n\t\tthis.lines = [];\r\n\t\tthis.rects = [];\r\n\t\tthis.ellipses = [];\r\n\t\tthis.elements = [];\r\n\t\tthis.renderCanvas();\r\n\t}\r\n\r\n\tsave() {\r\n\t\tconst data = this.canvas.toDataURL();\r\n\t\tthis.props.addImgToWall(data);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div ref = {(ref) => {this.doodleCanvasContainer = ref}} style = {{backgroundColor: this.state.backgroundColor}} className = \"doodle-canvas-container\">\r\n\t\t\t\t<span className = \"subheading\">Create a Doodle</span><span className = \"close-window-button\" onClick = {() => this.props.toggleMode('view')}>+</span> \r\n\t\t\t\t<nav className = \"tool-panel\">\r\n\t\t\t\t\t<div className = \"tool-panel-button\" style = {{marginRight: \"1em\"}} title = \"Clear All\" onClick = {this.clearCanvas}>Clear</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"stroke\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Draw\" onClick = {() => this.toggleMode('stroke')}>\r\n\t\t\t\t\t\t<svg className = \"icon\" width = \"1.5em\" height = \"1.5em\"><path d = \"m8.602 21.351-5.535-5.535 13.388-13.387 5.535 5.535zm-6.052-4.56 5.077 5.077-7.612 2.535zm21.142-10.523-.96.96-5.542-5.542.96-.96c.967-.968 2.535-.968 3.502 0l2.04 2.04c.96.97 .96 2.532 0 3.502zm0 0\"/></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"eraser\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Erase\" onClick = {() => this.toggleMode('eraser')}>\r\n\t\t\t\t\t\t<svg className = \"icon\" width = \"1.5em\" height = \"1.5em\"><path d = \"M24.911 8.07 17.517.675c-.23-.23-.604-.23-.834 0L4.167 13.191c-.111.111-.173.261-.173.417 0 .127.042 .248.117 .349l-3.808 3.808C.108 17.96 0 18.22 0 18.496c0 .276.108 .536.303 .732l4.34 4.34c.654.654 1.523 1.014 2.448 1.014.925 0 1.794-.36 2.448-1.014l2.092-2.092c.101.074 .222.117 .349.117 .156 0 .307-.062.417-.173L24.911 8.904c.111-.111.173-.261.173-.417S25.022 8.18 24.911 8.07zM8.703 22.734c-.431.431-1.004.668-1.613.668-.609 0-1.182-.237-1.613-.668L1.24 18.496l3.698-3.698 5.85 5.85L8.703 22.734z\"/></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"line\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Line\" onClick = {() => this.toggleMode('line')}>\r\n\t\t\t\t\t\t<svg className = \"shape\" width = \"1.5em\" height = \"1.5em\"><line x1 = \"0\" y1 = \"0\" x2 = \"100\" y2 = \"100\" /></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"rect\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Rectangle\" onClick = {() => this.toggleMode('rect')}>\r\n\t\t\t\t\t\t<svg className = \"shape\" width = \"1.5em\" height = \"1.5em\"><rect width = \"1.5em\" height = \"1.5em\" style = {{strokeWidth: 6}} /></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"ellipse\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Ellipse\" onClick = {() => this.toggleMode('ellipse')}>\r\n\t\t\t\t\t\t<svg className = \"shape\" width = \"1.5em\" height = \"1.5em\"><circle cx = \"0.75em\" cy = \"0.75em\" r = \"0.6em\" /></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = {this.state.mode == \"img\" ? \"tool-panel-button active\" : \"tool-panel-button\"} title = \"Image\" onClick = {() => this.toggleMode('img')}>\r\n\t\t\t\t\t\t<svg className = \"icon\" width = \"1.5em\" height = \"1.5em\"><path d = \"M8.32 7.488q0 1.04-.728 1.768t-1.768.728-1.768-.728-.728-1.768.728-1.768 1.768-.728 1.768.728 .728 1.768zm13.312 4.992v5.824h-18.304v-2.496l4.16-4.16 2.08 2.08 6.656-6.656zm1.248-9.152h-20.8q-.169 0-.293.123t-.123.293v15.808q0 .169.123 .293t.293.123h20.8q.169 0 .293-.123t.123-.293v-15.808q0-.169-.123-.292t-.293-.123zm2.08.416v15.808q0 .858-.611 1.469t-1.469.611h-20.8q-.858 0-1.469-.611t-.611-1.469v-15.808q0-.858.611-1.469t1.469-.611h20.8q.858 0 1.469.611t.611 1.469z\"/></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"tool-panel-button\" title = \"Undo\" onClick = {this.undo}>\r\n\t\t\t\t\t\t<svg className = \"icon\" width = \"1.5em\" height = \"1.5em\"><path d = \"M22.395 18.41c0-.84.18-4.155-2.435-6.785-1.76-1.77-4.015-2.67-7.165-2.81V4.8L3.2 11.2l9.6 6.4v-3.99c2 .055 3.12.455 4.335 1 1.545.69 2.765 2.2 3.79 3.83l.96 1.56H22.4C22.4 19.495 22.395 18.855 22.395 18.41z\"/></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"tool-panel-button\" title = \"Redo\" onClick = {this.redo}>\r\n\t\t\t\t\t\t<svg className = \"icon\" width = \"1.5em\" height = \"1.5em\" style = {{transform: \"scale(-1, 1)\"}}><path d = \"M22.395 18.41c0-.84.18-4.155-2.435-6.785-1.76-1.77-4.015-2.67-7.165-2.81V4.8L3.2 11.2l9.6 6.4v-3.99c2 .055 3.12.455 4.335 1 1.545.69 2.765 2.2 3.79 3.83l.96 1.56H22.4C22.4 19.495 22.395 18.855 22.395 18.41z\"/></svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className = \"tool-panel-button\" style = {{marginLeft: \"1em\"}} title = \"Done\" onClick = {this.save}>Done</div>\r\n\t\t\t\t\t<ImageSelector show = {this.state.showImageSelect} useImg = {this.useImg} />\r\n\t\t\t\t</nav>\r\n\t\t\t\t<div className = \"settings-panel\">\r\n\t\t\t\t\tBackground:<ColorSelector changeColor = {this.changeColor} colorType = \"backgroundColor\"/>\r\n\t\t\t\t\tStroke:<ColorSelector changeColor = {this.changeColor} colorType = \"strokeColor\"/>\r\n\t\t\t\t\tFill:<ColorSelector changeColor = {this.changeColor} colorType = \"fillColor\"/>\r\n\t\t\t\t\tStroke Size: <StrokeWeightSelector changeStrokeWeight = {this.changeStrokeWeight} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<canvas className = \"doodle-canvas\" ref = {(ref) => {this.canvas = ref}} onMouseDown = {this.onMouseDown} onTouchStart = {this.onMouseDown} onMouseLeave = {this.endPaintEvent} onMouseUp = {this.endPaintEvent} onTouchEnd = {this.endPaintEvent} onTouchCancel = {this.endPaintEvent} onMouseMove = {this.onMouseMove} onTouchMove = {this.onMouseMove}>Your browser doesn't support canvas...</canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AddDoodle;","import React from 'react';\r\n\r\nimport ImageSelector from './ImageSelector';\r\n\r\nclass AddImage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\r\n\t\t};\r\n        this.useImg = this.useImg.bind(this);\r\n\t}\r\n\r\n\tuseImg(src, w, h) {\r\n\t\tthis.props.addImgToWall(src);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className = \"editing-image-container\">\r\n\t\t\t\t<span className = \"subheading\">Add an Image</span><span className = \"close-window-button\" onClick = {() => this.props.toggleMode('view')}>+</span><br />\r\n\t\t\t\t<ImageSelector show = {true} useImg = {this.useImg} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AddImage;","import React from 'react';\r\n\r\nclass WallPiece extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className = {this.props.wallId == this.props.currentWall ? \"wall-piece\" : \"wall-piece hide\"} style = {{left: this.props.x + \"px\", top: this.props.y + \"px\"}} onClick = {() => this.props.getPieceInfo(this.props.index)}>\r\n\t\t\t\t{this.props.imgSrc != 'clear' && this.props.artistPkId != 0 ? \r\n\t\t\t\t\t<img id = {\"wall-piece-img-\" + this.props.index} className = \"wall-piece-img\" src = {this.props.imgSrc} width = {this.props.width} draggable = \"false\" />\r\n\t\t\t\t:\r\n\t\t\t\t\t<div id = {\"wall-piece-clearzone-\" + this.props.index} className = \"wall-piece-clearzone\" style = {{width: this.props.width, height: this.props.height}} draggable = \"false\"></div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default WallPiece;","import React from 'react';\r\nimport {DragDropContainer, DropTarget} from 'react-drag-drop-container';\r\n\r\nimport WallPiece from './WallPiece';\r\n\r\nclass Wall extends React.Component {\r\n\tpieces = [];\r\n\thitboards = [];\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpieces: [],\r\n\t\t\tcanPlace: true,\r\n\t\t\timgToAddTitle: 'Untitled Piece',\r\n\t\t\timgToAddDescription: 'A beautiful work of art.',\r\n\t\t\timgToAddWidth: '200px',\r\n\t\t\timgDragging: false,\r\n\t\t\thitbox: {\r\n\t        \tsrc: '',\r\n\t        \tx: 0,\r\n\t        \ty: 0,\r\n\t        \tw: 0,\r\n\t        \th: 0\r\n\t        },\r\n\t        hitboards: [],\r\n\t        pieceToShow: null,\r\n\t\t\tbuffering: false,\r\n\t\t\tbufferingCounter: 15,\r\n\t\t\tloadingMessageIndex: 0,\r\n\t\t\tloadingMessages: ['Unfortunately... This may take a fucking while...',\r\n\t\t\t\t\t\t\t  'Don\\'t you hate it when you tell him something sentimental, and he texts back \\\"Cool Beans 🥔🥔🥔\\\"? (jhn)',\r\n\t\t\t\t\t\t\t  'Holy shit, I could get cuffed by the time this loads. Hell, I could even get married!',\r\n\t\t\t\t\t\t\t  'Fuck, I\\'m going to grow a full beard by the time this loads—and I\\'m Asian!',\r\n\t\t\t\t\t\t\t  'Did you know that my Rice Purity Score is in the 80s? Think about that... I guess that\\'s what happens when you\\'ve only been to college for three quarters of a year...',\r\n\t\t\t\t\t\t\t  'According to all known laws of aviation, there is no way a bee should be able to fly. Its wings are too small to get its fat little body off the ground. The bee, of course, flies anyway because bees don\\'t care what humans think is impossible. Yellow, black. Yellow, black. Yellow, black. Yellow, black. Ooh, black and yellow! Let\\'s shake it up a little. Barry! Breakfast is ready! Ooming! Hang on a second. Hello? - Barry? - Adam? - Oan you believe this is happening? - I can\\'t. I\\'ll pick you up. Looking sharp. Use the stairs. Your father paid good money for those. Sorry. I\\'m excited. Here\\'s the graduate. We\\'re very proud of you, son. A perfect report card, all B\\'s. Very proud. Ma! I got a thing going here. - You got lint on your fuzz. - Ow! That\\'s me! - Wave to us! We\\'ll be in row 118,000. - Bye! Barry, I told you, stop flying in the house! - Hey, Adam. - Hey, Barry. - Is that fuzz gel? - A little. Special day, graduation. Never thought I\\'d make it. Three days grade school, three days high school. Those were awkward. Three days college. I\\'m glad I took a day and hitchhiked around the hive. You did come back different. - Hi, Barry. - Artie, growing a mustache? Looks good. - Hear about Frankie? - Yeah. - You going to the funeral? - No, I\\'m not going. Everybody knows, sting someone, you die. Don\\'t waste it on a squirrel. Such a hothead. I guess he could have just gotten out of the way. I love this incorporating an amusement park into our day. That\\'s why we don\\'t need vacations. Boy, quite a bit of pomp... under the circumstances. - Well, Adam, today we are men. - We are! - Bee-men.'],\r\n\t\t\tcurrentWall: 0,\r\n\t\t\timgToAddSrc: '',\r\n\t\t\tmobileUser: false,\r\n\t\t\terrorWindowMsg: ''\r\n\t\t};\r\n\t\tthis.loadPieces = this.loadPieces.bind(this);\r\n\t\tthis.createHitboard = this.createHitboard.bind(this);\r\n\t\tthis.addPieceToHitboard = this.addPieceToHitboard.bind(this);\r\n\t\tthis.checkPieceClear = this.checkPieceClear.bind(this);\r\n\t\tthis.setHitboxOffset = this.setHitboxOffset.bind(this);\r\n        this.handleImgPick = this.handleImgPick.bind(this);\r\n        this.handleImgDrag = this.handleImgDrag.bind(this);\r\n        this.handleImgDrop = this.handleImgDrop.bind(this);\r\n        this.getOpenSpot = this.getOpenSpot.bind(this);\r\n        this.autoPlace = this.autoPlace.bind(this);\r\n        this.renderPieces = this.renderPieces.bind(this);\r\n        this.adjustImgProps = this.adjustImgProps.bind(this);\r\n        this.getPieceInfo = this.getPieceInfo.bind(this);\r\n        this.hidePieceInfo = this.hidePieceInfo.bind(this);\r\n        this.likePiece = this.likePiece.bind(this);\r\n        this.hidePopUpWindow = this.hidePieceInfo.bind(this);\r\n        this.bufferingTick = this.bufferingTick.bind(this);\r\n        this.startBufferingCountdown = this.startBufferingCountdown.bind(this);\r\n        this.intervalHandle = null;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tbuffering: true,\r\n\t\t\tloadingMessageIndex: Math.floor(Math.random() * 3)\r\n\t\t});\r\n\t\tthis.loadPieces();\r\n\r\n\r\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n        \tthis.setState({\r\n        \t\tmobileUser: true\r\n        \t});\r\n        }\r\n\r\n        this.startBufferingCountdown();\r\n\t}\r\n\r\n\tbufferingTick() {\r\n\t\tif (this.state.bufferingCounter == 0) {\r\n\t\t\tclearInterval(this.intervalHandle);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.state.bufferingCounter % 5 == 0) {\r\n        \tthis.setState({\r\n        \t\tloadingMessageIndex: Math.floor(Math.random() * this.state.loadingMessages.length)\r\n        \t});\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tbufferingCounter: this.state.bufferingCounter - 1\r\n\t\t});\r\n\t}\r\n\r\n\tstartBufferingCountdown() {\r\n\t\tthis.intervalHandle = setInterval(this.bufferingTick, 1300);\r\n\t}\r\n\r\n\tloadPieces() {\r\n        console.log('Loading wall...');\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            mode: 'cors',\r\n            headers: {'Content-Type': 'application/json'}\r\n        };\r\n        fetch(/*this.state.serverRoute + */'/load_wall', requestOptions).then(response => response.json()).then((responseData) => {\r\n            if (responseData.status == 'success') {\r\n                console.log('Loading successful...', responseData);\r\n                this.pieces = responseData.data.pieces;\r\n\r\n                console.log('Creating Hitboards');\r\n\t\t\t\tthis.createHitboard();\r\n\t\t\t\tfor (var i = 0; i < this.pieces.length; i++) {\r\n\t\t\t\t\tthis.addPieceToHitboard(this.pieces[i]);\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('Done Creating Hitboards');\r\n\r\n\t\t\t\tclearInterval(this.intervalHandle);\r\n                this.setState({\r\n                    pieces: responseData.data.pieces,\r\n                    buffering: false,\r\n                    hitboards: this.hitboards,\r\n                    bufferingCounter: 0\r\n                });\r\n\r\n                this.props.changeBufferingStatus(false);\r\n            } else {\r\n                console.log('Loading failed...', responseData);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tbuffering: false\r\n\t\t\t\t});\r\n            }\r\n        }).catch((error) => {\r\n            console.log('Loading error...', error);\r\n\t\t\tthis.setState({\r\n\t\t\t\tbuffering: false\r\n\t\t\t});\r\n        });\r\n\t}\r\n\r\n\tcreateHitboard() {\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tvar hitboard = []\r\n\t\t\tfor (var y = 0; y < this.wall.clientHeight; y++) {\r\n\t\t\t\tvar row = [];\r\n\t\t\t\tfor (var x = 0; x < this.wall.clientWidth; x++) {\r\n\t\t\t\t\trow.push(0);\r\n\t\t\t\t}\r\n\t\t\t\thitboard.push(row);\r\n\t\t\t}\r\n\t\t\tthis.hitboards.push(hitboard);\r\n\t\t}\r\n\t}\r\n\r\n\taddPieceToHitboard(piece) {\r\n\t\tfor (var y = Math.floor(piece.y); y < piece.y + piece.h; y++) {\r\n\t\t\tfor (var x = Math.floor(piece.x); x < piece.x + piece.w; x++) {\r\n\t\t\t\tthis.hitboards[piece.wallId][y][x] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    checkPieceClear(hitbox) {\r\n    \tvar canPlace = true;\r\n    \tconst offset = 20;\r\n    \tfor (var i = 0; i < this.state.pieces.length; i++) {\r\n    \t\tvar piece = this.state.pieces[i];\r\n\r\n    \t\tif (piece.wallId == this.props.currentWall &&\r\n    \t\t\thitbox.x + offset < piece.x + piece.w && hitbox.x + hitbox.w - offset > piece.x &&\r\n    \t\t\thitbox.y + offset < piece.y + piece.h && hitbox.y + hitbox.h - offset > piece.y) {\r\n    \t\t\tcanPlace = false;\r\n    \t\t}\r\n    \t}\r\n\r\n    \tif (!(hitbox.x >= 0 && hitbox.x + hitbox.w < this.wall.clientWidth &&\r\n    \t\thitbox.y >= 0 && hitbox.y + hitbox.h < this.wall.clientHeight)) {\r\n    \t\tcanPlace = false;\r\n    \t}\r\n\r\n    \treturn canPlace;\r\n    }\r\n\r\n    setHitboxOffset(e) {\r\n    \tthis.setState({\r\n    \t\thitboxOffset: {\r\n    \t\t\tx: e.pageX - document.getElementById('image-to-add').getBoundingClientRect().x - window.scrollX,\r\n    \t\t\ty: e.pageY - document.getElementById('image-to-add').getBoundingClientRect().y - window.scrollY\r\n    \t\t}\r\n    \t});\r\n    }\r\n\r\n    handleImgPick(e) {\r\n    \tif (!this.props.imgToAddPlaced && !this.state.mobileUser) {\r\n\t        // e.dataTransfer.setData('text/plain', this.imgToAdd.width, this.imgToAdd.height);\r\n\t        // e.dataTransfer.setDragImage(this.imgToAdd, 0, 0);\r\n\t        this.setState({\r\n\t            imgToAddSrc: this.imgToAdd.src\r\n\t        });\r\n\t    }\r\n    }\r\n\r\n    handleImgDrag(dragData, target, x, y) {\r\n\t    // e.preventDefault();\r\n    \tif (!this.props.imgToAddPlaced && !this.state.mobileUser) {\r\n\t    \tconst hitbox = {\r\n\t        \tsrc: this.imgToAdd.src,\r\n\t        \tx: x - this.state.hitboxOffset.x  + window.scrollX,\r\n\t        \ty: y - this.state.hitboxOffset.y + window.scrollY,\r\n\t        \tw: this.imgToAdd.clientWidth,\r\n\t        \th: this.imgToAdd.clientHeight\r\n\t        }\r\n\r\n\t        var hitboxClear = this.checkPieceClear(hitbox);\r\n\t        this.setState({\r\n\t        \tcanPlace: hitboxClear,\r\n\t        \thitbox: hitbox,\r\n\t\t\t\timgDragging: true\r\n\t        });\r\n\t    }\r\n    }\r\n\r\n    handleImgDrop(dragData, target, x, y) {\r\n        const piece = {\r\n        \tpkId: -1,\r\n        \tindex: this.state.pieces.length,\r\n        \ttitle: this.state.imgToAddTitle,\r\n        \tartist: this.props.user.username,\r\n        \tdescription: this.state.imgToAddDescription,\r\n        \tartistPkId: this.props.user.pkId,\r\n        \tlikesPkIds: [],\r\n        \tnumLikes: 0,\r\n        \tsrc: this.state.imgToAddSrc,\r\n        \tx: Math.floor(this.state.hitbox.x),\r\n        \ty: Math.floor(this.state.hitbox.y),\r\n        \tw: Math.floor(this.state.hitbox.w),\r\n        \th: Math.floor(this.state.hitbox.h),\r\n        \twallId: this.props.currentWall\r\n        }\r\n        console.log('Dropping ', piece);\r\n\r\n\t    if (this.checkPieceClear(piece)) {\r\n\t    \tconsole.log('Piece clear...');\r\n\t    \tvar img = new Image();\r\n\t\t\timg.crossOrigin = 'Anonymous';\r\n\t    \timg.src = this.state.imgToAddSrc;\r\n\t    \tvar that = this;\r\n\t        that.setState({\r\n\t        \tcanPlace: true,\r\n\t\t\t\timgDragging: false,\r\n\t\t        buffering: true,\r\n\t\t\t\tloadingMessageIndex: Math.floor(Math.random() * this.state.loadingMessages.length),\r\n\t\t\t\thitbox: {\r\n\t\t        \tsrc: '',\r\n\t\t        \tx: 0,\r\n\t\t        \ty: 0,\r\n\t\t        \tw: 0,\r\n\t\t        \th: 0\r\n\t\t        },\r\n\t\t        hitboxOffset: {\r\n\t\t        \tx: 0,\r\n\t\t        \ty: 0\r\n\t\t        }\r\n\t        });\r\n\r\n\t    \timg.onload = function() {\r\n\t    \t\tconsole.log('Image loaded...');\r\n\r\n\t    \t\tvar scalingFactor = 1;\r\n\t    \t\tconst widthCap = 720;\r\n\t    \t\tif (img.naturalWidth > widthCap) {\r\n\t    \t\t\tscalingFactor = img.naturalWidth/widthCap;\r\n\t    \t\t\tconsole.log('Image rescaled from ' + img.naturalWidth + ' x ' + img.naturalHeight + ' to ' + img.naturalWidth/scalingFactor + ' x ' + img.naturalHeight/scalingFactor + '...');\r\n\t    \t\t}\r\n\r\n\t    \t\tthat.hiddenCanvas.width = img.naturalWidth/scalingFactor;\r\n\t    \t\tthat.hiddenCanvas.height = img.naturalHeight/scalingFactor;\r\n\t    \t\tvar ctx = that.hiddenCanvas.getContext('2d');\r\n\t    \t\tctx.drawImage(img, 0, 0, img.naturalWidth/scalingFactor, img.naturalHeight/scalingFactor);\r\n\t    \t\tvar uri = that.hiddenCanvas.toDataURL('image/png'); \r\n\t    \t\tvar b64URI = 'data:image/png;base64,' + uri.replace(/^data:image.+;base64,/, '');\r\n\t\t    \tpiece.src = b64URI;\r\n\r\n\t\t        console.log('Adding piece to wall...');\r\n\t\t        const requestOptions = {\r\n\t\t            method: 'POST',\r\n\t\t            mode: 'cors',\r\n\t\t            headers: {'Content-Type': 'application/json'},\r\n\t\t            body: JSON.stringify({piece: piece})\r\n\t\t        };\r\n\t\t        fetch(/*this.state.serverRoute + */'/add_piece', requestOptions).then(response => response.json()).then((responseData) => {\r\n\t\t            if (responseData.status == 'success') {\r\n\t\t                console.log('Addition successful...', responseData);\r\n\t\t\t\t        that.pieces.push(responseData.data.piece); \r\n\t\t\t        \tthat.props.pieceAddedToWall();\r\n\r\n\t\t\t        \tthat.setState({\r\n\t\t\t        \t\tpieces: that.pieces,\r\n\t\t\t        \t\tbuffering: false\r\n\t\t\t        \t});\r\n\r\n\t\t                const updatedUser = {\r\n\t\t\t\t\t\t\tusername: responseData.data.user.username, \r\n\t\t\t\t\t\t\tfbId: responseData.data.user.fbId, \r\n\t\t\t\t\t\t\tpkId: responseData.data.user.pkId, \r\n\t\t\t\t\t\t\tprofilePicture: responseData.data.user.profilePicture, \r\n\t\t\t\t\t\t\tnumPieces: responseData.data.user.numPieces,\r\n                        \tmaxNumPieces: responseData.data.user.maxNumPieces\r\n\t\t                }\r\n\t\t                that.props.updateUser(updatedUser);\r\n\t\t            } else {\r\n\t\t                console.log('Addition failed...', responseData);\r\n\t\t            }\r\n\t\t        }).catch((error) => {\r\n\t\t            console.log('Addition error...', error);\r\n\t\t        });\r\n\t    \t}\r\n\t    } else {\r\n\t    \tconsole.log('Piece not clear...');\r\n\t    \tthis.setState({\r\n\t        \tcanPlace: true,\r\n\t\t\t\timgDragging: false,\r\n\t\t\t\tbuffering: false,\r\n\t\t\t\thitbox: {\r\n\t\t        \tsrc: '',\r\n\t\t        \tx: 0,\r\n\t\t        \ty: 0,\r\n\t\t        \tw: 0,\r\n\t\t        \th: 0\r\n\t\t        },\r\n\t\t        hitboxOffset: {\r\n\t\t        \tx: 0,\r\n\t\t        \ty: 0\r\n\t\t        }\r\n\t    \t});\r\n\t    }\r\n    }\r\n\r\n    getOpenSpot(piece) {\r\n    \tvar hitboard = this.hitboards[this.props.currentWall];\r\n    \t// console.log(hitboard.length, hitboard[0].length, piece.w, piece.h)\r\n    \tfor (var y = 0; y < hitboard.length - piece.h; y += 5) {\r\n    \t\tfor (var x = 0; x < hitboard[y].length - piece.w; x += 5) {\r\n    \t\t\t// console.log(y, x, hitboard[y][x], ' and ', y, x + piece.w - 1, hitboard[y][x + piece.w - 1], ' and ', y + piece.h - 1, x, hitboard[y + piece.h - 1][x], ' and ', y + piece.h - 1, x + piece.w - 1, hitboard[y + piece.h - 1][x + piece.w - 1]);\r\n    \t\t\tif (hitboard[y][x] == 0 && hitboard[y][x + piece.w - 1] == 0 &&\r\n    \t\t\t\thitboard[y + piece.h - 1][x] == 0 && hitboard[y + piece.h - 1][x + piece.w - 1] == 0) {\r\n    \t\t\t\t// console.log('start', x, y);\r\n\t\t\t\t\tvar perimeterClear = true;\r\n\t\t\t\t\tvar areaClear = true;\r\n\r\n\t\t\t\t\t// console.log('sweep H');\r\n\t\t\t\t\tfor (var i = 1; i < piece.w - 1; i += 10) {\r\n\t\t\t\t\t\t// console.log('break H?', x + i, y, hitboard[y][x + i], ' or ', x + i, y + piece.h - 1, hitboard[y + piece.h - 1][x + i]);\r\n\t\t\t\t\t\tif (hitboard[y][x + i] == 1 || hitboard[y + piece.h - 1][x + i] == 1) {\r\n\t\t\t\t\t\t\t// console.log('break H')\r\n\t\t\t\t\t\t\tperimeterClear = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (perimeterClear) {\r\n\t\t\t\t\t\t// console.log('sweep V');\r\n\t\t\t\t\t\tfor (var j = 1; j < piece.h - 1; j += 10) {\r\n\t\t\t\t\t\t\t// console.log('break V?', x, y + j, hitboard[y + j][x], ' or ', x + piece.w - 1, y + j, hitboard[y + j][x + piece.w - 1]);\r\n\t\t\t\t\t\t\tif (hitboard[y + j][x] == 1 || hitboard[y + j][x + piece.w - 1] == 1) {\r\n\t\t\t\t\t\t\t\t// console.log('break V');\r\n\t\t\t\t\t\t\t\tperimeterClear = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (perimeterClear) {\r\n\t\t\t\t\t\tfor (var i = x + 1; i < x + piece.w - 2; i += 35) {\r\n\t\t\t\t\t\t\tfor (var j = y + 1; j < y + piece.h - 2; j+= 35) {\r\n\t\t\t\t\t\t\t\tif (hitboard[j][i] == 1) {\r\n\t\t\t\t\t\t\t\t\t// console.log('break A');\r\n\t\t\t\t\t\t\t\t\tareaClear = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// console.log('all clear?', perimeterClear, areaClear);\r\n\t\t\t\t\tif (perimeterClear && areaClear) {\r\n\t\t\t\t\t\t// console.log('return all clear');\r\n\t\t\t\t\t\treturn {x: x, y: y}\r\n\t\t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\n    \treturn {x: -1, y: -1}\r\n    }\r\n\r\n    autoPlace() {\r\n    \tvar hitbox = {\r\n    \t\tw: document.getElementById('image-to-add').width,\r\n    \t\th: document.getElementById('image-to-add').height\r\n    \t}\r\n    \tconsole.log(hitbox);\r\n    \tthis.setState({\r\n    \t\timgToAddSrc: document.getElementById('image-to-add').src\r\n\t    }, () => {\r\n    \t\tconst openSpot = this.getOpenSpot(hitbox);\r\n\r\n\t    \tif (openSpot.x > -1 && openSpot.y > -1) {\r\n\t\t    \thitbox.x = openSpot.x;\r\n\t\t    \thitbox.y = openSpot.y;\r\n\t\t    \tthis.setState({\r\n\t\t    \t\thitbox: hitbox\r\n\t\t    \t}, () => {\r\n\t\t    \t\tconsole.log('sending to ', openSpot.x, openSpot.y);\r\n\t\t    \t\tthis.handleImgDrop({}, {}, openSpot.x, openSpot.y);\r\n\t\t    \t});\r\n\t    \t} else {\r\n\t    \t\tthis.setState({\r\n\t    \t\t\terrorWindowMsg: 'There\\'s no space on this wall for your image. Try decreasing the size or cycling to another wall!'\r\n\t    \t\t});\r\n\t    \t}\r\n    \t});\r\n    }\r\n\r\n    adjustImgProps(adjustment) {\r\n    \tif (adjustment == 'title') {\r\n    \t\tthis.setState({\r\n\t    \t\timgToAddTitle: this.imgTitle.value\r\n\t    \t});\r\n    \t} else if (adjustment == 'description') {\r\n    \t\tthis.setState({\r\n\t    \t\timgToAddDescription: this.imgDescription.value\r\n\t    \t});\r\n    \t} else if (adjustment == 'size') {\r\n\t    \tthis.setState({\r\n\t    \t\timgToAddWidth: this.imgSlider.value + 'px'\r\n\t    \t});\r\n    \t}\r\n    }\r\n\r\n    renderPieces(piece, index) {\r\n    \treturn (\r\n\t\t\t<WallPiece id = {\"wall-piece-\" + index} currentWall = {this.props.currentWall} artistPkId = {piece.artistPkId} wallId = {piece.wallId} key = {index} index = {index} imgSrc = {piece.src} getPieceInfo = {this.getPieceInfo} handleImgDrag = {(e) => this.handleImgDrag(e)} handleImgDrop = {(e) => this.handleImgDrop(e)} x = {piece.x} y = {piece.y} width = {piece.w} height = {piece.h} />\r\n    \t)\r\n    }\r\n\r\n    getPieceInfo(index) {\r\n    \tthis.setState({\r\n    \t\tpieceToShow: this.state.pieces[index]\r\n    \t});\r\n    }\r\n\r\n    hidePieceInfo() {\r\n    \tthis.setState({\r\n    \t\tpieceToShow: null\r\n    \t});\r\n    }\r\n\r\n    likePiece() {\r\n    \tvar piece = this.state.pieceToShow;\r\n    \tif (!piece.likesPkIds.includes(this.props.user.pkId)) {\r\n\t\t\tconsole.log(\"Liking piece...\", piece);\r\n\t\t\tthis.setState({\r\n\t\t\t\tbuffering: true,\r\n\t\t\t\tloadingMessageIndex: Math.floor(Math.random() * this.state.loadingMessages.length),\r\n\t\t\t});\r\n\r\n\t\t\tconst data = {\r\n\t\t\t\tuserPkId: this.props.user.pkId,\r\n\t\t\t\tpiecePkId: piece.pkId\r\n\t\t\t}\r\n\t\t    const requestOptions = {\r\n\t\t        method: 'POST',\r\n\t\t        mode: 'cors',\r\n\t\t        headers: {'Content-Type': 'application/json'},\r\n\t\t        body: JSON.stringify({data: data})\r\n\t\t    };\r\n\t\t    fetch(/*this.state.serverRoute + */'/like_piece', requestOptions).then(response => response.json()).then((responseData) => {\r\n\t\t        if (responseData.status == 'success') {\r\n\t\t            console.log('Like successful...', responseData);\r\n\t\t            this.pieces[responseData.data.piece.index] = responseData.data.piece\r\n\t\t            this.setState({\r\n\t\t            \tpieceToShow: responseData.data.piece,\r\n\t\t            \tpieces: this.pieces,\r\n\t\t            \tbuffering: false\r\n\t\t            });\r\n\t\t        } else {\r\n\t\t            console.log('Like failed...', responseData);\r\n\t\t        }\r\n\t\t    }).catch((error) => {\r\n\t\t        console.log('Like error...', error);\r\n\t\t    });\r\n\t\t}\r\n    }\r\n\r\n    hidePopUpWindow() {\r\n        this.setState({\r\n            errorWindowMsg: ''\r\n        });\r\n    }\r\n\r\n\trender() {\r\n\t\tconst wallColors = ['#f5f5f5', '#e0e0e0', '#9e9e9e', '#616161'];\r\n\r\n\t\treturn (\r\n\t\t\t<div style = {{cursor: this.state.mouseCursor}} className = \"wall-container\">\r\n\t\t\t\t<DropTarget>\r\n\t\t\t\t\t<div id = \"wall-front\" className = {this.props.currentWall == 0 ? \"wall\" : \"wall hide\"} ref = {(ref) => {this.wall = ref}} style = {{opacity: this.props.currentWall == 0 && this.state.canPlace ? 1 : 0.5, backgroundColor: wallColors[0]}}></div>\r\n\t\t\t\t</DropTarget>\r\n\t\t\t\t<DropTarget>\r\n\t\t\t\t\t<div id = \"wall-right\" className = {this.props.currentWall == 1 ? \"wall\" : \"wall hide\"} ref = {(ref) => {this.wall = ref}} style = {{opacity: this.props.currentWall == 1 && this.state.canPlace ? 1 : 0.5, backgroundColor: wallColors[1]}} onDragOver = {(e) => this.handleImgDrag(e)} onDrop = {(e) => this.handleImgDrop(e)}></div>\r\n\t\t\t\t</DropTarget>\r\n\t\t\t\t<DropTarget>\t\r\n\t\t\t\t\t<div id = \"wall-back\" className = {this.props.currentWall == 2 ? \"wall\" : \"wall hide\"} ref = {(ref) => {this.wall = ref}} style = {{opacity: this.props.currentWall == 2 && this.state.canPlace ? 1 : 0.5, backgroundColor: wallColors[2]}} onDragOver = {(e) => this.handleImgDrag(e)} onDrop = {(e) => this.handleImgDrop(e)}></div>\r\n\t\t\t\t</DropTarget>\r\n\t\t\t\t<DropTarget>\r\n\t\t\t\t\t<div id = \"wall-left\" className = {this.props.currentWall == 3 ? \"wall\" : \"wall hide\"} ref = {(ref) => {this.wall = ref}} style = {{opacity: this.props.currentWall == 3 && this.state.canPlace ? 1 : 0.5, backgroundColor: wallColors[3]}} onDragOver = {(e) => this.handleImgDrag(e)} onDrop = {(e) => this.handleImgDrop(e)}></div>\r\n\t\t\t\t</DropTarget>\r\n\r\n\t\t\t\t{this.state.pieces.map((piece, index) => (\r\n\t\t\t\t\tthis.renderPieces(piece, index)\r\n\t\t\t\t))}\r\n\r\n\t\t\t\t<img id = \"hitbox\" style = {{pointerEvents: \"none\", display: \"inline\", position: \"absolute\", left: this.state.hitbox.x + 'px', top: this.state.hitbox.y + 'px'}} src = {this.state.hitbox.src} width = {this.state.hitbox.w} />\r\n\r\n\t\t\t\t{this.props.imgToAddSrc && !this.props.imgToAddPlaced ? \r\n\t\t\t\t\t<div className = {this.state.imgDragging ? \"image-to-add-container hide\" : \"image-to-add-container\"}>\r\n\t\t\t\t\t\t<div className = \"image-to-add-text-inputs\">\r\n\t\t\t\t\t\t\tTitle: <input ref = {(ref) => {this.imgTitle = ref}} type = \"text\" onChange = {() => this.adjustImgProps('title')} /><br />\r\n\t\t\t\t\t\t\tDescription: <input ref = {(ref) => {this.imgDescription = ref}} type = \"text\" onChange = {() => this.adjustImgProps('description')} /><br />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\tAdjust Image Size: <input ref = {(ref) => {this.imgSlider = ref}} type = \"range\" min = \"30\" max = \"200\" onChange = {() => this.adjustImgProps('size')} /><br />\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{!this.state.mobileUser ? \r\n\t\t\t\t\t\t\t<DragDropContainer ref = {(ref) => {this.imgToDrag = ref}} onDragStart = {this.handleImgPick} onDrag = {this.handleImgDrag} onDragEnd = {this.handleImgDrop}>\r\n\t\t\t\t\t\t\t\t<img src = {this.props.imgToAddSrc} id = \"image-to-add\" className = \"image-to-add\" ref = {(ref) => {this.imgToAdd = ref}} draggable = \"false\" width = {this.state.imgToAddWidth} onMouseDown = {(e) => this.setHitboxOffset(e)} />\r\n\t\t\t\t\t\t\t</DragDropContainer>\r\n\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t<img src = {this.props.imgToAddSrc} id = \"image-to-add\" className = \"image-to-add\" ref = {(ref) => {this.imgToAdd = ref}} draggable = \"false\" width = {this.state.imgToAddWidth} onMouseDown = {(e) => this.setHitboxOffset(e)} />\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t{!this.state.mobileUser ? \"Click and Drag Image to Place\" : \"\"} <br />\r\n\t\t\t\t\t\t<div className = \"ghost-button\" onClick = {this.autoPlace}>Auto Place</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t: \"\"}\r\n\r\n\t\t\t\t<div className = {this.state.pieceToShow != null ? \"wall-piece-info-container\" : \"wall-piece-info-container hide\"}>\r\n\t\t\t\t\t<span className = \"close-window-button\" onClick = {this.hidePieceInfo}>+</span> \r\n\t\t\t\t\t{this.state.pieceToShow != null ?\r\n\t\t\t\t\t\t<div className = \"wall-piece-info-grid-container\">\r\n\t\t\t\t\t\t\t<div className = \"wall-piece-info-image-container\">\r\n\t\t\t\t\t\t\t\t{this.state.pieceToShow.src != 'clear' ? <img src = {this.state.pieceToShow.src} className = \"wall-piece-info-image\" /> : \"\"}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className = \"wall-piece-info\">\r\n\t\t\t\t\t\t\t\t<span className = \"heading\">{this.state.pieceToShow.title}</span>\r\n\t\t\t\t\t\t\t\t<span className = \"subheading\">By {this.state.pieceToShow.artist}</span>\r\n\t\t\t\t\t\t\t\t<p>Description: {this.state.pieceToShow.description}</p>\r\n\t\t\t\t\t\t\t\t<svg className = {this.state.pieceToShow.likesPkIds.includes(this.props.user.pkId) ? \"active\" : \"unloved\"} onClick = {this.likePiece}><path d = \"M34.692 0c-4.998 0-9.261 3.969-11.172 8.232C21.609 3.969 17.346 0 12.348 0 5.586 0 0 5.586 0 12.348c0 13.818 13.965 17.493 23.52 31.164 8.967-13.671 23.52-17.787 23.52-31.164C47.04 5.586 41.454 0 34.692 0z\"/></svg>\r\n\t\t\t\t\t\t\t\t<span className = \"likes-counter\">{this.state.pieceToShow.numLikes}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t: \"\"}\r\n\t\t\t\t</div>\r\n\r\n                <div className = {this.state.errorWindowMsg != '' ? \"error-window-container\" : \"error-window-container hide\"}>\r\n                    <span className = \"close-window-button\" onClick = {this.hidePopUpWindow}>+</span>\r\n                    <span className = \"heading\">{this.state.errorWindowMsg}</span>\r\n                </div>\r\n\r\n\t\t\t\t{this.state.buffering && this.props.user.fbId != '' ?\r\n\t\t\t\t\t<div className = \"buffering-container\">\r\n\t\t\t\t\t\t<span className = \"heading\">\r\n\t\t\t\t\t\t\t<i>Loading Data...</i><br />\r\n\t\t\t\t\t\t\t{this.state.loadingMessages[this.state.loadingMessageIndex]}\r\n\t\t\t\t\t\t\t<br /><br />\r\n\t\t\t\t\t\t\t{this.state.bufferingCounter != 0 ? this.state.bufferingCounter : \"\"}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t: \"\"}\r\n\r\n\t\t\t\t<canvas id = \"hidden-canvas\" ref = {(ref) => {this.hiddenCanvas = ref}} style = {{display: \"none\"}}></canvas>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Wall;","import React from 'react';\nimport Cookies from 'js-cookie';\n\nimport FacebookLoginButton from './components/FacebookLoginButton';\nimport AddDoodle from './components/AddDoodle';\nimport AddImage from './components/AddImage';\nimport Wall from './components/Wall';\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loggedIn: false,\n            serverRoute: 'http://localhost:5000',\n            showArtButtons: false,\n            buffering: true,\n            pieceAdded: true,\n            mode: 'view',\n            addingImg: false,\n            imgToAddSrc: '',\n            showForceLogin: true,\n            errorWindowMsg: '',\n            currentWall: 0,\n            user: {\n                username: '',\n                fbId: '',\n                pkId: -1,\n                profilePicture: '',\n                numPieces: 0,\n                maxNumPieces: 1\n            },\n        };\n        this.toggleMode = this.toggleMode.bind(this);\n        this.login = this.login.bind(this);\n        this.unAuthLogin = this.unAuthLogin.bind(this);\n        this.addImgToWall = this.addImgToWall.bind(this);\n        this.pieceAddedToWall = this.pieceAddedToWall.bind(this);\n        this.toggleShowOptions = this.toggleShowOptions.bind(this);\n        this.hidePopUpWindow = this.hidePopUpWindow.bind(this);\n        this.updateUser = this.updateUser.bind(this);\n        this.changeWall = this.changeWall.bind(this);\n        this.changeBufferingStatus = this.changeBufferingStatus.bind(this);\n    }\n\n    toggleMode(mode) {\n        if ((mode == \"doodle\") && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n            this.setState({\n                errorWindowMsg: 'Sorry, you\\'re going to have to use a computer to add a doodle, because I can\\'t program on mobile devices for shit! Fortunately, you can still add an image to the wall on your mobile device.'\n            });\n            return;\n        }\n\n        if (this.state.user.numPieces < this.state.user.maxNumPieces) {\n            this.setState({\n                showArtButtons: !this.state.showArtButtons,\n                mode: mode\n            });\n        } else if (mode != 'view' && this.state.user.numPieces >= this.state.user.maxNumPieces && this.state.user.fbId.includes('unauth_user')) {\n            this.setState({\n                showForceLogin: true\n            });\n        } else if (mode != 'view' && this.state.user.numPieces >= this.state.user.maxNumPieces && !this.state.user.fbId.includes('unauth_user')) {\n            this.setState({\n                errorWindowMsg: 'You\\'ve reached the maximum number of pieces that you can add to the wall! Congratu-fucking-lations!'\n            });\n        }\n    }\n\n    login(user) {\n        console.log('User logging in...', user);\n        const requestOptions = {\n            method: 'POST',\n            mode: 'cors',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({user: user})\n        };\n        fetch(/*this.state.serverRoute + */'/login', requestOptions).then(response => response.json()).then((responseData) => {\n            if (responseData.status == 'success') {\n                console.log('Login successful...', responseData);\n                this.setState({\n                    loggedIn: responseData.data.user.authenticated,\n                    showForceLogin: false,\n                    user: {\n                        username: responseData.data.user.username,\n                        fbId: responseData.data.user.fbId,\n                        pkId: responseData.data.user.pkId, \n                        profilePicture: responseData.data.user.profilePicture, \n                        numPieces: responseData.data.user.numPieces,\n                        maxNumPieces: responseData.data.user.maxNumPieces\n                    }\n                });\n                this.hidePopUpWindow();\n            } else {\n                console.log('Login failed...', responseData);\n            }\n        }).catch((error) => {\n            console.log('Login error...', error);\n        });\n    }\n\n    unAuthLogin() {\n        const userId = Cookies.get('userId');\n        if (userId == undefined) {\n            const unauthUserId = 'unauth_user_' + Date.now() + '_' + Math.random();\n            Cookies.set('userId', unauthUserId);\n            const user = {\n                username: 'Unknown Artist ' + unauthUserId.split('_')[2],\n                picture: '',\n                userId: unauthUserId\n            }\n            this.login(user);\n        } else {\n            const user = {\n                username: 'Unknown Artist ' + userId.split('_')[2],\n                picture: '',\n                userId: userId\n            }\n            this.login(user);\n        }\n    }\n\n    addImgToWall(src) {\n        this.setState({\n            imgToAddSrc: src,\n            imgToAddPlaced: false,\n            addingImg: true,\n            showArtButtons: false,\n            pieceAdded: false\n        });\n    }\n\n    pieceAddedToWall() {\n        const userUpdated = this.state.user;\n        userUpdated.numPieces += 1;\n\n        this.setState({\n            mode: 'view',\n            user: userUpdated,\n            pieceAdded: true,\n            addingImg: false,\n            imgToAddPlaced: true\n        });\n    }\n\n    toggleShowOptions() {\n        this.setState({\n            showArtButtons: !this.state.showArtButtons\n        });\n    }\n\n    hidePopUpWindow() {\n        this.setState({\n            showForceLogin: false,\n            errorWindowMsg: ''\n        });\n    }\n\n    updateUser(user) {\n        console.log('Updated User: ', user);\n        this.setState({\n            user: user\n        });\n    }\n\n    changeWall() {\n        if (this.state.currentWall == 3) {\n            this.setState({\n                currentWall: 0\n            });\n        } else {\n            this.setState({\n                currentWall: this.state.currentWall + 1\n            });\n        }\n        this.toggleMode('view');\n    }\n\n    changeBufferingStatus(status) {\n        this.setState({\n            buffering: status\n        });\n    }\n\n    render() {\n        return (\n            <div className = \"wrapper\">\n                <header className = \"primary\">\n                    <nav>\n                        <span className = \"heading\">Regret</span>\n\n                        <ul className = \"nav-buttons links\">\n                            <li><FacebookLoginButton login = {this.login}/></li>\n                            <li>{this.state.user.username.length > 0 ? 'Welcome ' + this.state.user.username.split(' ')[0] : ''}</li>\n                            <li>{this.state.user.numPieces > -1 ? 'Contributions Left: ' + (this.state.user.maxNumPieces - this.state.user.numPieces) : ''}</li>\n                        </ul>\n                    </nav>\n                </header>\n\n                <main className = \"primary\">\n                    <article>\n                        <Wall id = {0} currentWall = {this.state.currentWall} user = {this.state.user} updateUser = {this.updateUser} imgToAddSrc = {this.state.imgToAddSrc} imgToAddPlaced = {this.state.imgToAddPlaced} pieceAddedToWall = {this.pieceAddedToWall} changeBufferingStatus = {this.changeBufferingStatus} />\n                        {this.state.pieceAdded && !this.state.buffering ?\n                            <div>\n                                <div className = {this.state.showArtButtons ? \"art-options\" : \"art-options hide\"}>\n                                    <span>Logged in as {this.state.user.username}</span> <br />\n                                    <span>Additions Remaining: {this.state.user.maxNumPieces - this.state.user.numPieces}</span>\n                                    <a className = \"art-option-button\" onClick = {() => this.toggleMode('doodle')}>Add Doodle</a>\n                                    <a className = \"art-option-button\" onClick = {() => this.toggleMode('img')}>Add Image</a>\n                                    <a className = \"art-option-button\" onClick = {this.changeWall}>Next Wall</a>\n                                </div>\n                                <a className = {this.state.showArtButtons ? \"round-button active\" : \"round-button\"} onClick = {() => this.toggleShowOptions()}>+</a>\n                            </div>\n                        : \"\"}\n                    </article>\n\n                    <article>\n                        <div className = {this.state.mode == \"doodle\" && !this.state.addingImg ? \"editing-container\" : \"editing-container hide\"}>{this.state.mode == \"doodle\" && !this.state.addingImg ? <AddDoodle toggleMode = {this.toggleMode} addImgToWall = {this.addImgToWall} /> : \"\"}</div>\n                        <div className = {this.state.mode == \"img\" && !this.state.addingImg ? \"editing-container\" : \"editing-container hide\"}>{this.state.mode == \"img\" && !this.state.addingImg ?<AddImage toggleMode = {this.toggleMode} addImgToWall = {this.addImgToWall} /> : \"\"}</div>\n                    </article>\n\n                    <article>\n                        <div className = {this.state.showForceLogin && !this.state.loggedIn ? \"force-login-container\" : \"force-login-container hide\"}>\n                            {this.state.user.numPieces >= this.state.user.maxNumPieces ? <span className = \"close-window-button\" onClick = {this.hidePopUpWindow}>+</span> : \"\"}\n                            <span className = \"heading\">{this.state.user.numPieces < this.state.user.maxNumPieces ? \"Would You Like to Login with Facebook?\" : \"Login to Contribute More to the Wall!\" }</span>\n                            <div className = \"force-login-button-container\">\n                                {this.state.user.numPieces < this.state.user.maxNumPieces ? <a className = \"button\" onClick = {this.unAuthLogin}>Hahaha... No.</a> : \"\"}\n                                {/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? \"Sorry, you can't login to Facebook on a mobile device...\" : <FacebookLoginButton login = {this.login}/>}\n                            </div>\n                        </div>\n                    </article>\n\n                    <article>\n                        <div className = {this.state.errorWindowMsg != '' ? \"error-window-container\" : \"error-window-container hide\"}>\n                            <span className = \"close-window-button\" onClick = {this.hidePopUpWindow}>+</span>\n                            <span className = \"heading\">{this.state.errorWindowMsg}</span>\n                        </div>\n                    </article>\n                </main>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}